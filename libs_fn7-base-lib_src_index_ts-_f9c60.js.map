{"version":3,"file":"libs_fn7-base-lib_src_index_ts-_f9c60.js","mappings":"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","sources":["./libs/fn7-base-lib/src/index.ts","./libs/fn7-base-lib/src/lib/PlatformConstants.ts","./libs/fn7-base-lib/src/lib/fn7-base-lib.module.ts","./libs/fn7-base-lib/src/lib/loader/loader.component.ts","./libs/fn7-base-lib/src/lib/loader/loader.component.html","./libs/fn7-base-lib/src/lib/route-reusable-strategy.ts","./libs/fn7-base-lib/src/lib/services/app-info.service.ts","./libs/fn7-base-lib/src/lib/services/authentication.service.ts","./libs/fn7-base-lib/src/lib/services/data.service.ts","./libs/fn7-base-lib/src/lib/services/global.service.ts","./libs/fn7-base-lib/src/lib/services/http/api-prefix.interceptor.ts","./libs/fn7-base-lib/src/lib/services/http/auth.interceptor.ts","./libs/fn7-base-lib/src/lib/services/http/custom-headers.interceptor.ts","./libs/fn7-base-lib/src/lib/services/http/error-handler.interceptor.ts","./libs/fn7-base-lib/src/lib/services/http/global.interceptor.ts","./libs/fn7-base-lib/src/lib/services/http/http.service.ts","./libs/fn7-base-lib/src/lib/services/snackbar.service.ts","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["export * from './lib/fn7-base-lib.module';\nexport * from './lib/loader/loader.component';\nexport * from './lib/services/app-info.service';\nexport * from './lib/services/authentication.service';\nexport * from './lib/services/data.service';\nexport * from './lib/services/global.service';\nexport * from './lib/services/snackbar.service'\nexport * from './lib/PlatformConstants'\n","export enum PlatformConstants {\n    baseIndex = '7000000001.1000000001',\n    organisation_hierarchy_key = 'org_hkey',\n    organisation_role = 'org_role'\n}\n\n// Example for Fn7QueryParam\n// 1. cckey (required): A unique key provided to clients to authenticate requests. Platform adds this by default. It should be kept confidential. Example: 123662b0.\n\n// 2. fields (optional): Comma-separated list of fields to be included in the response. This allows for a selective projection of the data. Example: doc_id,created_at.\n\n// 3. sortBy (optional): A JSON object specifying which field to sort by and the sort direction (`asc` for ascending and `desc` for descending). Example: {\"created_at\":\"desc\"}.\n\n// 4. perPage (optional): The number of items to display per page in the response, used for pagination. Example: 30.\n\n// 5. search (optional): A search term used to query the data, allowing users to find journeys related to a specific keyword or phrase. Example: fn7.\n\n// 6. filter (optional): A query to further refine the search results. This is often a JSON object representing different filtering criteria. Example: doc_id.keyword:3456789890.\n\n// 7. isImageSearch (optional): A boolean indicating whether the search should be limited to journeys with associated images. Example: true.\n\n// 8. isSemanticSearch (optional): A boolean indicating whether to use semantic search capabilities for more relevant results. Example: true.\n\n// 9. serverSideAction (optional): A parameter to trigger specific server-side actions or business logic during the request. Example: joinCohort.\n\n// 10. treeView (optional): A boolean indicating if the results should be formatted in a hierarchical tree structure. Example: true.\n\n// 11. treeParams (optional): A JSON object specifying parameters for the tree view, such as the field to use as the tree hierarchy, a separator for path values, and the depth of the tree. Example: {\"field\":\"deskhubPath\",\"separator\":\"::\",\"treeDepth\":1}.\n\nexport interface Fn7QueryParams {\n    search?: any;\n    filter?: any;\n    isImageSearch?: boolean;\n    isSemanticSearch?: boolean;\n    treeView?: boolean;\n    treeParams?: any;\n    version ?:any;\n    cckey?: string;\n    perPage ?: number;\n    serverSideAction ?: any;\n    sortBy ?:any;\n    fields ?:string,\n    page?: any\n}\nexport const userFn7HelixApplications = \"user_helix_applications\"\nexport const userHelixJourney = \"user_helix_journey\"\nexport const helixJourney = \"helix_journey\"\nexport const helixAppId = \"fn7_helix_application_id\"\nexport const PLATFORM_VERSION = \"platform_version\"\nexport const APP_CONTEXT = 'app_context'\nexport const ORG_HKEY = 'org_hkey'\nexport const ORG_ROLE = 'org_role'\nexport const USER_ROLE = 'user_role'\nexport const FIREBASE_CUSTOM_TOKEN = 'firebase_custom_token'\nexport const FIREBASE_CUSTOM_TOKEN_EXPIRY = 'firebase_custom_token_expiry'\n\n\n\n\n\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoaderComponent } from './loader/loader.component';\nimport { GlobalService } from './services/global.service';\nimport { AppInfoService } from './services/app-info.service';\nimport { SnackbarService } from './services/snackbar.service';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { RouteReuseStrategy } from '@angular/router';\nimport { HttpService } from './services/http/http.service';\nimport { ApiPrefixInterceptor } from './services/http/api-prefix.interceptor';\nimport { AuthInterceptor } from './services/http/auth.interceptor';\nimport { CustomHeadersInterceptor } from './services/http/custom-headers.interceptor';\nimport { ErrorHandlerInterceptor } from './services/http/error-handler.interceptor';\nimport { GlobalInterceptor } from './services/http/global.interceptor';\nimport { RouteReusableStrategy } from './route-reusable-strategy';\nimport { AuthenticationService } from './services/authentication.service';\n\n@NgModule({\n  imports: [CommonModule, HttpClientModule, MatSnackBarModule],\n  providers: [\n    SnackbarService,\n    GlobalService,\n    AppInfoService,\n    AuthenticationService,\n    ApiPrefixInterceptor,\n    AuthInterceptor,\n    CustomHeadersInterceptor,\n    GlobalInterceptor,\n    ErrorHandlerInterceptor,\n    {\n      provide: HttpClient,\n      useClass: HttpService,\n    },\n    { provide: RouteReuseStrategy, useClass: RouteReusableStrategy },\n  ],\n  declarations: [],\n  exports: [HttpClientModule],\n})\nexport class Fn7BaseLibModule {}\n","import { Component } from '@angular/core';\nimport { GlobalService } from '../services/global.service';\nimport { CommonModule } from '@angular/common';\n\n@Component({\n  selector: 'app-loader',\n  templateUrl: './loader.component.html',\n  styleUrls: ['./loader.component.scss'],\n  standalone: true,\n  imports: [\n    CommonModule\n  ],\n})\nexport class LoaderComponent {\n  constructor(public loader:GlobalService) {\n\n  }\n}\n","<!-- <div class=\"cssload-container flex items-center flex-col justify-center\" *ngIf=\"loader.getLoading()\"> -->\n<!-- <img src=\"./assets/angular-testing-book.webp\" alt=\"\" height=\"200px\" width=\"300px\"> -->\n<!-- <div class=\"cssload-speeding-wheel\"></div> -->\n<!-- <span class=\"loader\"></span>\n    <p class=\"text-white\">{{loader.getLoadingMessage()}}</p>\n</div>  -->\n<div *ngIf=\"loader.getLoading()\" class=\"fixed top-0 left-0 w-full z-[999]\">\n  <div class=\"w-full h-[4px] rounded overflow-hidden\">\n    <div class=\"h-full bg-primary-500 animate-progress\"></div>\n  </div>\n</div>\n<!--\n<div style=\"height: 300px; width: 400px; margin-left: 20em\">\n  hello\n  {{ loader.getLoading() }}\n</div> -->\n","import {\n    ActivatedRouteSnapshot,\n    DetachedRouteHandle,\n    RouteReuseStrategy,\n  } from '@angular/router';\n  import { get as lget } from 'lodash';\n  \n  export class RouteReusableStrategy\n    implements  RouteReuseStrategy\n  {\n    private routeStore = new Map<string, DetachedRouteHandle>();\n    // private retrievingRoute : any;\n  \n    constructor() {\n    }\n  \n    shouldDetach(route: ActivatedRouteSnapshot): boolean {\n      // const isMenuLayoutComp = lget(route, \"data.routeCacheConfig.isMenuLayoutComp\", false)\n      const shouldStore = lget(route, \"data.routeCacheConfig.reuse\", false);\n      // console.log(\" Cached route LOCATION shouldDetach => \", window.location.href)\n      // const key = this.getCurrentURL(route)\n      // shouldStore &&  console.log(\"qawert Cached route STORE\", key, shouldStore, isMenuLayoutComp)\n      // let r = this.routeStore.get(key)\n      // shouldStore && !isMenuLayoutComp && console.log(\"qawert Cached route STORE componentttttt\", r)\n      // if(shouldStore && !isMenuLayoutComp) {\n      //   // console.log(\" Cached route store LOCATION store 1=> \",shouldReuse, route.data)\n      //   if(key.includes(this.retrievingRoute)){\n      //     console.log(\"qawert Cached route SAMEEEEEE\")\n      //     this.retrievingRoute = null;\n      //     this.routeStore.delete(key)\n      //     return false;\n      //   }\n      // }\n      return shouldStore\n    }\n  \n    store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n      const routeCacheConfig = lget(route, \"data.routeCacheConfig\", {})\n      const shouldReuse = lget(route, \"data.routeCacheConfig.reuse\", false);\n      if(shouldReuse) {\n        // console.log(\" Cached route store LOCATION store 1=> \",shouldReuse, route.data)\n        const isMenuLayoutComp = routeCacheConfig[\"isMenuLayoutComp\"];\n        const mode = routeCacheConfig[\"mode\"];\n        let key = '';\n        if(isMenuLayoutComp) {\n          key = \"MenuLayoutComp\";\n        } else {\n          // const doc_type = (route.params && route.params['doc_type']) || '';\n          // key = `${doc_type}.${mode}`;\n          key = this.getCurrentURL(route)\n        }\n        // console.log(\" Cached route store LOCATION store 2 => \",key)\n        // console.log(\" Cached route \", key)\n        \n        handle && this.routeStore.set(key, handle);\n      }  \n      // console.log(\" Cached route LOCATION store => \", window.location.href)\n      // console.log(\" Cached route NOTHING TO STORE\")\n    }\n  \n    shouldAttach(route: ActivatedRouteSnapshot): boolean {\n      const routeCacheConfig = lget(route, \"data.routeCacheConfig\", {})\n      const shouldReuse = lget(route, \"data.routeCacheConfig.reuse\", false);\n      // const kkey = this.getCurrentURL(route)\n      // shouldReuse && console.log(\"qawert Cached route RETRIEVE\", kkey)\n      \n      if(shouldReuse) {\n        // console.log(\" Cached route shouldAttach routeCacheConfig => \", routeCacheConfig)\n        const isMenuLayoutComp = routeCacheConfig[\"isMenuLayoutComp\"];\n        const mode = routeCacheConfig[\"mode\"];\n        if(isMenuLayoutComp && route.component && this.routeStore.get(\"MenuLayoutComp\")) {\n          return true\n        } else if(!isMenuLayoutComp){\n        const doc_type = (route.params && route.params['doc_type']) || '';\n        const cachedRoute = `${doc_type}.${mode}`;\n        const cachedRouteKey = this.getCurrentURL(route)\n        // this.retrievingRoute = cachedRouteKey\n        // let r = this.routeStore.get(cachedRouteKey)\n        // console.log(\"qawert Cached route RETRIEVE componentttttt\", r)\n        const res = !!this.routeStore.get(cachedRouteKey) || false\n        // console.log(\" Cached route LOCATION shouldAttach => \", cachedRouteKey)\n        // console.log(\" Cached route \", cachedRouteKey)\n        return res\n        }\n      }\n      return false\n    }\n  \n    retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n      const routeCacheConfig = lget(route, \"data.routeCacheConfig\", {})\n      const shouldReuse = lget(route, \"data.routeCacheConfig.reuse\", false);\n      if(shouldReuse) {\n        const isMenuLayoutComp = routeCacheConfig[\"isMenuLayoutComp\"];\n        const mode = routeCacheConfig[\"mode\"];\n        let key = \"\" ;\n        if(isMenuLayoutComp && route.component && this.routeStore.get(\"MenuLayoutComp\")) {\n         key = \"MenuLayoutComp\";\n        } else {\n          // const doc_type = (route.params && route.params['doc_type']) || '';\n          // key = `${doc_type}.${mode}`;\n          key = this.getCurrentURL(route)\n        }\n        // console.log(\" Cached route LOCATION retrieve => \", key)\n        // console.log(\" Cached route \", key)\n        return this.routeStore.get(key)!\n      } \n      return this.routeStore.get(\"\")!\n    }\n  \n    shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n      // const futureRouteCacheConfig = lget(future, \"data.routeCacheConfig.reuse\", false);\n      // const isMenuLayoutComp = lget(curr,\"data.routeCacheConfig.isMenuLayoutComp\",false);\n      // // let reuse = false;\n      // // if (future.routeConfig && !future.data[\"reuse\"]) {\n      // //   reuse = ( future.routeConfig === curr.routeConfig &&\n      // //             future.paramMap === curr.paramMap &&\n      // //             future.queryParamMap === curr.queryParamMap);\n      // // } else {\n      // //   reuse = future.routeConfig === curr.routeConfig || (future.data[\"reuse\"]);\n      // // }\n      // // const reuse = (future.routeConfig === curr.routeConfig &&\n      // //   future.paramMap === curr.paramMap &&\n      // //   future.queryParamMap === curr.queryParamMap) ||\n      // //   future.data.reuse;\n      // // let reuse = ( future.routeConfig === curr.routeConfig &&\n      // //   future.paramMap === curr.paramMap &&\n      // //   future.queryParamMap === curr.queryParamMap);\n      // console.log(\" Cached route MAP 1 => \", this.routeStore)\n      // if(futureRouteCacheConfig) {\n      // let currURL = this.getCurrentURL(future)\n      // let futureURL = this.getCurrentURL(curr)\n      // let reuse = currURL == futureURL\n      // // console.log(\" Cached route REUSE URLS => \", futureURL, currURL )\n      // // console.log(\" Cached route REUSE => \", currURL == futureURL)\n      // // console.log(\" Cached route MAP 2 => \", this.routeStore)\n      // return reuse;\n      // } return isMenuLayoutComp\n      return false\n    }\n  \n    getCurrentURL =  (routeSnapshot: ActivatedRouteSnapshot): string => {\n      const segments = routeSnapshot.pathFromRoot\n        // map each snapshot to its URL segments array\n        .map(s => s.url.map(segment => segment.path).join('/'))\n        // filter out empty segments\n        .filter(path => path)\n        // join segments with slashes\n        .join('/');\n        const queryParams = new URLSearchParams(routeSnapshot.queryParams as any).toString();\n        console.log(\" Cached route URL segments => \", segments)\n      return `/${segments}?${queryParams}`;\n    }\n  }\n  ","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable, map, catchError, throwError } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AppInfoService {\n  app_meta_data = {};\n  prefix = '/api';\n\n  constructor(private http: HttpClient) {}\n  getAppInfo() {\n    // const domain = \"helix.dev.app.fn7.io\"\n    const server_uri = `https://helix.dev.app.fn7.io`;\n    const current_host =\n      location.hostname === 'localhost'\n        ? new URL(server_uri).host\n        : location.host;\n\n    localStorage.setItem('server_url', `https://${current_host}`);\n\n    // Removing random version in the info call\n    return this.http\n      .get(`${this.prefix}/info`, { observe: 'response' })\n      .pipe(\n        catchError((error) => {\n          console.error('Error:', error);\n          return throwError(\n            'Something went wrong while fetching app meta data.'\n          );\n        })\n      )\n      .toPromise()\n      .then((response: any) => {\n        this.app_meta_data = response.body;\n        console.log('App meta data fetched successfully.', this.app_meta_data);\n\n        // storing the platform version in local storage\n        const headers = response.headers;\n        const platformVersion = headers.get('PLATFORM-VERSION');\n        localStorage.setItem('PLATFORM-VERSION', platformVersion);\n        return this.app_meta_data;\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n        return null; // Return a default value or handle the error as needed\n      });\n  }\n  getAppInfoData = (): Observable<any> => {\n    return this.http.get(`${this.prefix}/info`, { params: {} }).pipe(\n      map((data) => {\n        return data;\n      }),\n      catchError((err) => {\n        return throwError(() => err);\n      })\n    );\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport * as auth0 from 'auth0-js';\nimport jwtDecode from 'jwt-decode';\nimport { SnackbarService } from '../services/snackbar.service';\nimport { AppInfoService } from '../services/app-info.service';\nimport * as _ from 'lodash';\nimport { GlobalService } from '../services/global.service';\nimport { DataService } from './data.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { connect, firstValueFrom, lastValueFrom } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthenticationService {\n  auth0_domain = 'fn7.us.auth0.com';\n  custom_domain = 'uauth.fn7.io';\n  // auth0_callback_url: string;\n  auth0_connection = 'fn7-authentication-prod';\n  auth0_client_id = 'wgikqwgkjgdkjgvjkw';\n  auth0_client_secret =\n    'vT41FTVGEnCWGip6K4Ti9igMKREqf5lAnsAqWDOrmYKL9YHj19XFu7LzPqJqumaE';\n\n  auth0Client: any;\n  auth0: any;\n  constructor(\n    private http: HttpClient,\n    private snackbar: SnackbarService,\n    private appMetaService: AppInfoService,\n    private globalService: GlobalService,\n    private fn7sdk: DataService,\n    private router: Router,\n    private loader: GlobalService,\n    private location: Location, // private auth0: AuthService\n    private route: ActivatedRoute\n  ) {\n    // Initialize Auth0 Configuration\n    // if(window){\n    //   this.auth0_callback_url = window.location.origin + '/auth';\n    // }\n    // // this.auth0_callback_url = window.location.origin + '/auth';\n    // console.log(this.router)\n    // alert(this.auth0_callback_url);\n    // this.appMetaService.getAppInfo().then((res): any => {\n    //   const app_context: any = _.get(res, 'data.application_details');\n    //   const { auth0_configurations, ...app_data } = app_context;\n    //   this.initializeAuth0Config(auth0_configurations.tenants[0]);\n    // })\n    // this.getAuth0Config();\n  }\n  get auth0_callback_url() {\n    // return window.location.origin + '/auth';\n    return window.location.origin;\n  }\n  getAuth0Config() {\n    console.log('get config');\n    let app_context: any = localStorage.getItem('app_context');\n    if (app_context) {\n      app_context = JSON.parse(app_context);\n      console.log(app_context);\n      this.initializeAuth0Config(app_context.auth0_configurations.tenants[0]);\n    }\n  }\n  initializeAuth0Config(config: any) {\n    this.auth0_connection = config.auth0_connection;\n    this.auth0_client_id = config.auth0_client_id;\n    this.auth0_client_secret = config.auth0_client_secret;\n    this.auth0_domain = config.auth0_domain;\n    this.custom_domain = config.custom_auth0_domain;\n    this.auth0Client = new auth0.WebAuth({\n      domain: this.custom_domain,\n      clientID: this.auth0_client_id,\n      audience: `https://${this.auth0_domain}/api/v2/`,\n      responseType: 'token id_token',\n      // scope:\n      //   'openid profile email offline_access update:current_user_metadata read:users update:users',\n    });\n\n    // // init auth0 client with popup\n    // this.auth0Client = new auth0.Popup(\n    //   {\n    //     client: this.auth0_client_id\n    //   }, {}\n    // )\n    // WebAuth({\n    //   domain: this.custom_domain,\n    //   clientID: this.auth0_client_id,\n    //   audience: `https://${this.auth0_domain}/api/v2/`,\n    //   responseType: 'token id_token',\n    //   scope: 'openid profile email offline_access update:current_user_metadata read:users update:users',\n    //   redirectUri: this.auth0_callback_url + '/callback/user/login',\n    // });\n\n    console.log('init autho');\n  }\n  universallogin(redirectUripath: string) {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    this.auth0Client.authorize({\n      domain: 'uauth.fn7.io',\n      clientID: this.auth0_client_id,\n      redirectUri: this.auth0_callback_url + redirectUripath,\n      audience: `https://fn7.us.auth0.com/api/v2/`,\n      responseType: 'token code',\n      scope: 'openid profile email offline_access',\n    });\n  }\n\n  login(\n    email: string,\n    password: string,\n    redirectUriPath = '/admin/callback/user/login',\n    role: string = 'Consumer'\n  ) {\n    return new Promise((resolve, reject) => {\n      // Get the query string from URL\n      const urlParamsString = window.location.search;\n\n      if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n        this.getAuth0Config();\n      }\n      console.log('login', this.auth0Client);\n      this.loader.setLoading(true);\n      this.auth0Client.login(\n        {\n          domain: this.custom_domain,\n          clientID: this.auth0_client_id,\n          audience: `https://${this.auth0_domain}/api/v2/`,\n          responseType: 'code',\n          scope: 'openid profile email offline_access',\n          realm: this.auth0_connection,\n          email: email,\n          password: password,\n          redirectUri:\n            this.auth0_callback_url + redirectUriPath + urlParamsString,\n        },\n        (err: { error_description: any }) => {\n          this.globalService.setLoading(false);\n          if (err) console.log('something went wrong: ', err);\n          this.callSnackBar(err?.error_description);\n          this.loader.setLoading(false);\n          reject(err?.error_description);\n        },\n\n        (result: any) => {\n          console.log(result);\n          resolve(result);\n        }\n      );\n    });\n  }\n\n  loginWithoutRedirect(email: string, password: string) {\n    return new Promise((resolve, reject) => {\n      if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n        this.getAuth0Config();\n      }\n      console.log('login', this.auth0Client);\n      this.loader.setLoading(true);\n      this.auth0Client.popup.loginWithCredentials(\n        {\n          // domain: this.custom_domain,\n          // clientID: this.auth0_client_id,\n          // audience: `https://${this.auth0_domain}/api/v2/`,\n          responseType: 'token id_token',\n          scope:\n            'openid profile email offline_access update:current_user_metadata',\n\n          realm: this.auth0_connection,\n          username: email,\n          password: password,\n          redirectUri: this.auth0_callback_url + '/admin/callback/user/login',\n          connection: this.auth0_connection,\n        },\n        async (err: any, authResult: any) => {\n          this.globalService.setLoading(false);\n          if (err) {\n            console.log('something went wrong: ', err);\n            this.callSnackBar(err?.error_description);\n            this.loader.setLoading(false);\n            reject(err?.error_description);\n          } else {\n            console.log(authResult);\n            // const newSessionData = await this.refreshSession();\n            console.log(authResult);\n            this.setSessionInLocalStorage(authResult);\n            resolve(authResult);\n          }\n        }\n      );\n    });\n  }\n  signupWithoutRedirect(\n    email: string,\n    password: string,\n    redirectUripath: string,\n    name?: string,\n    fn7DirectUser: boolean = false,\n    role: string = 'Consumer'\n  ) {\n    return new Promise(async (resolve, reject) => {\n      try {\n        if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n          this.getAuth0Config();\n        }\n        console.log('login', this.auth0Client);\n        this.loader.setLoading(true);\n        let urlParamsString = window.location.search;\n        if (fn7DirectUser) {\n          urlParamsString = window.location.search\n            ? `${window.location.search}&fn7DirectUser=${encodeURIComponent(\n                fn7DirectUser\n              )}`\n            : `?fn7DirectUser=${encodeURIComponent(fn7DirectUser)}`;\n        }\n\n        let userMeta: any = await this.prepareUserMetadata(role);\n        userMeta['fn7DirectUser'] = fn7DirectUser.toString();\n        console.log(userMeta);\n        // return;\n        this.auth0Client.signup(\n          {\n            // domain: this.custom_domain,\n            // clientID: this.auth0_client_id,\n            // audience: `https://${this.auth0_domain}/api/v2/`,\n            // responseType: 'code',\n            scope:\n              'openid profile email offline_access update:users,update:users_app_metadata,update:current_user_metadata',\n            // realm: this.auth0_connection,\n            email: email,\n            password: password,\n            name: name,\n            connection: this.auth0_connection,\n            redirectUri: this.auth0_callback_url + redirectUripath,\n            responseType: 'token id_token',\n            userMetadata: userMeta,\n          },\n          async (err: any, authResult: any) => {\n            this.globalService.setLoading(false);\n            if (err) {\n              console.log('something went wrong: ', err);\n              this.callSnackBar(err?.description);\n              this.loader.setLoading(false);\n              reject(err?.description);\n            } else {\n              console.log(authResult);\n              try {\n                // take user consent\n                const result = await this.loginWithoutRedirect(email, password);\n\n                await this.performPostSignupActions(authResult, role);\n                resolve(result);\n              } catch (err: any) {\n                console.log(err);\n                reject(err.description ? err.description : err);\n              }\n            }\n          }\n        );\n      } catch (err) {\n        console.log(err);\n        reject(err);\n      }\n    });\n  }\n\n  async socialAuthWithPopup(\n    provider: any,\n    redirectUripath: string,\n    fn7DirectUser: boolean = false,\n    role: string = 'Consumer'\n  ) {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    let urlParamsString = window.location.search;\n    if (fn7DirectUser) {\n      urlParamsString = window.location.search\n        ? `${window.location.search}&fn7DirectUser=${encodeURIComponent(\n            fn7DirectUser\n          )}`\n        : `?fn7DirectUser=${encodeURIComponent(fn7DirectUser)}`;\n    }\n    let userMeta: any = await this.prepareUserMetadata(role);\n    userMeta['fn7DirectUser'] = fn7DirectUser.toString();\n    console.log(userMeta);\n    return new Promise((resolve, reject) => {\n      this.auth0Client.popup.authorize(\n        {\n          connection: provider,\n          // responseType: 'code',\n          redirectUri:\n            this.auth0_callback_url + redirectUripath + urlParamsString,\n          // redirectUri: '',\n          owp: true,\n          scope:\n            'openid profile email offline_access update:current_user_metadata',\n        },\n        async (err: any, authResult: any) => {\n          if (err) {\n            console.error(err);\n            this.callSnackBar(err.error_description);\n            reject(err.error_description);\n          } else {\n            console.log(authResult);\n            // this.setSessionInLocalStorage(authResult);\n            const decodedToken = this.decodeIdToken(authResult.idToken);\n            if (!decodedToken.user_id || !decodedToken.user_role) {\n              await this.setUserMetaDataInAuth0(\n                authResult.accessToken,\n                authResult.idToken,\n                userMeta\n              );\n              const newSession = await this.refreshSession();\n              // this.setSessionInLocalStorage(newSession);\n              await this.performPostSignupActions(newSession, role);\n              resolve({ authResult: newSession, action: 'signup' });\n            } else {\n              this.setSessionInLocalStorage(authResult);\n              resolve({ authResult: authResult, action: 'login' });\n            }\n          }\n        }\n      );\n    });\n  }\n\n  setUserMetaDataInAuth0(\n    accessToken: string,\n    idToken: string,\n    userMetadata: any\n  ) {\n    return new Promise((resolve, reject) => {\n      const management = new auth0.Management({\n        domain: this.custom_domain,\n        token: accessToken,\n      });\n\n      const userId = this.decodeIdToken(idToken).sub;\n\n      management.patchUserMetadata(\n        userId,\n        userMetadata,\n        (err: any, user: any) => {\n          if (err) {\n            console.error(err);\n            this.callSnackBar(err.error_description);\n            reject(err.error_description);\n          } else {\n            console.log(user);\n            resolve(user);\n          }\n        }\n      );\n    });\n  }\n\n  performPostSignupActions(authResult: any, role: string = 'Consumer') {\n    return new Promise(async (resolve, reject) => {\n      let userMetadata: any;\n      if (role == 'platform-owner') {\n        userMetadata = this.prepareUserMetadata('PlatformOwner', '', 'Admin');\n      } else if (role == 'provider') {\n        userMetadata = this.prepareUserMetadata('Provider');\n      } else {\n        userMetadata = this.prepareUserMetadata('Consumer');\n      }\n      const queryParams = this.route.snapshot.queryParams;\n      userMetadata['fn7DirectUser'] = queryParams['fn7DirectUser'];\n\n      const data = this.decodeIdToken();\n\n      const userData = {\n        user_id: data.user_id,\n        name: data.name,\n        org_role: data.org_role,\n        user_role: data.user_role,\n        org_hkey: data.org_hkey,\n        email: data.email,\n        fn7DirectUser: userMetadata.fn7DirectUser,\n        utm_source: userMetadata.utm_source,\n        utm_medium: userMetadata.utm_medium,\n        utm_campaign: userMetadata.utm_campaign,\n\n        // aaditional data\n        doc_id: data.user_id,\n        isActive: true,\n        isSignupJourneyCompleted: false,\n      };\n      const org_id = data.org_hkey.split('.').pop();\n\n      const orgData = {\n        doc_id: org_id,\n        org_hkey: data.org_hkey,\n        org_role: data.org_role,\n        name: data.name,\n        isActive: true,\n      };\n\n      lastValueFrom(\n        this.fn7sdk.createDocument('Fn7Organisations', orgData, null)\n      );\n      lastValueFrom(this.fn7sdk.createDocument('AppUsers', userData, null));\n      lastValueFrom(\n        this.fn7sdk.executeServerSideAction('globalCreateUserContact', userData)\n      );\n\n      if (!data.email_verified) {\n        // return this.router.navigate([`auth/email-verification`]);\n        this.router.navigate([`admin/email-verification`], {\n          queryParamsHandling: 'merge',\n        });\n      } else {\n        resolve(authResult);\n      }\n\n      // update user metadata\n      // const management = new auth0.Management({\n      //   domain: this.custom_domain,\n      //   token: authResult.accessToken,\n      // });\n\n      // management.patchUserMetadata(\n      //   authResult.idTokenPayload.sub,\n      //   userMetadata,\n      //   async (err: any, user: any) => {\n      //     if (err) {\n      //       console.error(err);\n      //       this.callSnackBar(err.error_description);\n      //       reject(err.error_description);\n      //     } else {\n      //       const data = this.decodeIdToken();\n      //       const userData = {\n      //         user_id: data.user_id,\n      //         name: data.name,\n      //         org_role: data.org_role,\n      //         user_role: data.user_role,\n      //         org_hkey: data.org_hkey,\n      //         email: data.email,\n      //         fn7DirectUser: userMetadata.fn7DirectUser,\n      //         utm_source: userMetadata.utm_source,\n      //         utm_medium: userMetadata.utm_medium,\n      //         utm_campaign: userMetadata.utm_campaign,\n\n      //         // aaditional data\n      //         doc_id: data.user_id,\n      //         isActive: true,\n      //         isSignupJourneyCompleted: false,\n      //       };\n      //       const org_id = data.org_hkey.split('.').pop();\n\n      //       const orgData = {\n      //         doc_id: org_id,\n      //         org_hkey: data.org_hkey,\n      //         org_role: data.org_role,\n      //         name: data.name,\n      //         isActive: true,\n      //       };\n\n      //       lastValueFrom(\n      //         this.fn7sdk.createDocument('Fn7Organisations', orgData, null)\n      //       );\n      //       await lastValueFrom(\n      //         this.fn7sdk.createDocument('AppUsers', userData, null)\n      //       );\n      //       lastValueFrom(\n      //         this.fn7sdk.executeServerSideAction(\n      //           'globalCreateUserContact',\n      //           userData\n      //         )\n      //       );\n\n      //       if (!data.email_verified) {\n      //         // return this.router.navigate([`auth/email-verification`]);\n      //         this.router.navigate([`admin/email-verification`], {\n      //           queryParamsHandling: 'merge',\n      //         });\n      //       } else {\n      //         resolve(authResult);\n      //       }\n      //     }\n      //   }\n      // );\n    });\n  }\n\n  //  which wil give new access token and id token\n  async refreshSession(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n        this.getAuth0Config();\n      }\n      this.auth0Client.checkSession(\n        {\n          redirectUri: `${this.auth0_callback_url}/admin/callback/user/login`,\n          audience: `https://${this.auth0_domain}/api/v2/`,\n          scope:\n            'openid profile email offline_access update:users,update:users_app_metadata,update:current_user_metadata',\n        },\n\n        (err: any, result: any) => {\n          if (err) {\n            console.error('Session check error:', err);\n            reject(err);\n          } else {\n            console.log('Session check result:', result);\n            this.setSessionAfterExchange(result);\n            resolve(result);\n          }\n        }\n      );\n    });\n  }\n\n  getUserInfoFromAuth0(refreshToken: string = '') {\n    const token = refreshToken || localStorage.getItem('access_token');\n    return new Promise((resolve, reject) => {\n      this.auth0Client.client.userInfo(token, (err: any, user: any) => {\n        if (err) {\n          console.log(err);\n          reject(err);\n        } else {\n          console.log(user);\n          resolve(user);\n        }\n      });\n    });\n  }\n\n  // setSessioninLocalStorage\n  async setSessionInLocalStorage(authResult: any): Promise<any> {\n    // return new Promise(async (resolve, reject) => {\n    try {\n      const expiresAt = JSON.stringify(\n        authResult.expiresIn * 1000 + new Date().getTime()\n      );\n      localStorage.setItem('access_token', authResult.accessToken);\n      localStorage.setItem('id_token', authResult.idToken);\n      localStorage.setItem('expires_at', expiresAt);\n      localStorage.setItem('refresh_token', authResult.refreshToken);\n      // const userInfo: any = await this.getUserInfoFromAuth0(\n      //   authResult.accessToken\n      // );\n      const decodedToken = this.decodeIdToken(authResult.idToken);\n      const userContext = decodedToken;\n      localStorage.setItem('user_context', JSON.stringify(userContext));\n\n      // resolve(true);\n      return true;\n    } catch (err) {\n      return err;\n      // reject(err);\n    }\n    // });\n  }\n\n  async newlogin(\n    email: string,\n    password: string,\n    redirectUriPath = '/callback/user/login'\n  ) {\n    this.auth0.loginWithPopup().subscribe((res: any) => {\n      this.afterAuthenticate('login');\n    });\n  }\n\n  async newSignup() {\n    this.auth0\n      .loginWithPopup({\n        authorizationParams: {\n          screen_hint: 'signup',\n        },\n      })\n      .subscribe((res: any) => {\n        this.afterAuthenticate('signup');\n      });\n  }\n\n  afterAuthenticate(mode = 'login') {\n    this.auth0.user$.subscribe(async (user: any) => {\n      console.log(user);\n      let tokenAUTH;\n\n      const access_token: any = await lastValueFrom(\n        this.auth0.getAccessTokenSilently()\n      );\n      console.log(access_token);\n      this.auth0.getAccessTokenSilently().subscribe((token: any) => {\n        console.log(token);\n        tokenAUTH = token;\n      });\n      //   getAccessTokenSilently(options: GetTokenSilentlyOptions & {\n      //     detailedResponse: true;\n      // }):\n\n      this.auth0\n        .getAccessTokenSilently({ detailedResponse: true })\n        .subscribe((token: any) => {\n          console.log(token);\n          tokenAUTH = token;\n        });\n      // get id_token\n      let Claims: any; //await lastValueFrom(this.auth0.idTokenClaims$);\n      this.auth0.idTokenClaims$.subscribe(async (claims: any) => {\n        console.log(claims);\n        console.log(Claims);\n        Claims = claims;\n        const id_token = Claims.__raw;\n        const expires_at = Claims.exp * 1000;\n        console.log(id_token, expires_at);\n\n        const appInfo = this.globalService.applicationMeta();\n        const userMetadata = this.prepareUserMetadata(\n          appInfo?.defaultOrgSignUpRole\n        );\n\n        // set local storage\n        localStorage.setItem('id_token', id_token);\n        localStorage.setItem('access_token', access_token);\n        localStorage.setItem('expires_at', JSON.stringify(expires_at));\n\n        if (mode == 'login') {\n          if (user['user_id']) {\n            const AppUser = await firstValueFrom(\n              this.fn7sdk.getDocument('AppUsers', user['user_id'])\n            );\n            localStorage.setItem(\n              'user_context',\n              JSON.stringify(AppUser.data[0])\n            );\n            console.log(AppUser);\n          }\n          const userMetadata = this.prepareUserMetadata(\n            appInfo?.defaultOrgSignUpRole\n          );\n          //  const handleAuth = await this.handleAuthentication(userMetadata, 'code');\n          // this.routeUser(AppUser.data[0].isSignupJourneyCompleted);\n          const loginWorkflowId = appInfo?.loginWorkflowId;\n          this.routeUser(true);\n        }\n\n        if (mode == 'signup') {\n          const userMetadata = this.prepareUserMetadata('Provider');\n          const decodedToken = this.decodeIdToken(id_token);\n\n          // set user metadata\n          const auth0meta = await this.setUserMetaData(\n            access_token,\n            decodedToken.sub,\n            userMetadata\n          );\n          console.log(auth0meta);\n        }\n      });\n    });\n  }\n\n  signupAndLogin(\n    email: string,\n    password: string,\n    redirectUripath: string,\n    name?: string,\n    fn7DirectUser: boolean = false\n  ) {\n    let urlParamsString = window.location.search;\n    if (fn7DirectUser) {\n      urlParamsString = window.location.search\n        ? `${window.location.search}&fn7DirectUser=${encodeURIComponent(\n            fn7DirectUser\n          )}`\n        : `?fn7DirectUser=${encodeURIComponent(fn7DirectUser)}`;\n    }\n\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    let redirectUri =\n      this.auth0_callback_url + redirectUripath + urlParamsString;\n    this.auth0Client.redirect.signupAndLogin(\n      {\n        connection: this.auth0_connection,\n        email: email,\n        password: password,\n        responseType: 'code',\n        name: name,\n        redirectUri: redirectUri,\n      },\n      (error: any, result: any) => {\n        if (error) {\n          this.globalService.setLoading(false);\n          this.callSnackBar('Sign up failed. Please try again.');\n          console.error(error);\n        } else {\n          console.log('result', result);\n          this.callSnackBar('Sucessful Signup');\n        }\n      }\n    );\n  }\n\n  routeUser(isSignupJourneyCompleted: boolean) {\n    const redirectUrlParams: string = this.getReturnUrlParams;\n\n    const idToken = this.decodeIdToken();\n    const user = JSON.parse(localStorage.getItem('user_context') || '{}');\n    const app_data = this.globalService.applicationMeta();\n    const appRoutes = app_data.appRoutes;\n    let roleroute;\n\n    console.log('user =>', user);\n\n    console.log('Org role', idToken.org_role);\n    console.log('App data', app_data);\n\n    if (idToken.org_role == 'Consumer') {\n      roleroute = appRoutes['Consumer']\n        ? appRoutes['Consumer']\n        : appRoutes['default'];\n\n      if (isSignupJourneyCompleted) {\n        console.log('Journey Completed');\n        if (redirectUrlParams) return this.rediretToReturnUrl();\n        this.router.navigate([roleroute]);\n      } else {\n        console.log('Journey not Completed');\n\n        const role_configurations: any = _.get(\n          app_data,\n          'role_configurations',\n          undefined\n        );\n\n        const signupJourneyDocType = _.get(\n          role_configurations,\n          'Consumer.signupJourneyDocType'\n        );\n        console.log(\n          'Signup Journey DocType  =>',\n          _.get(role_configurations, 'Consumer.signupJourneyDocType')\n        );\n\n        if (signupJourneyDocType) {\n          const displaySignupJourneyPopup = _.get(\n            role_configurations,\n            'Consumer.displaySignupJourneyPopup'\n          );\n          console.log('displaySignupJourneyPopup', displaySignupJourneyPopup);\n\n          if (displaySignupJourneyPopup) {\n            // Display signup journey from popup\n            // this.openSignupJourneyDialog(roleroute, signupJourneyDocType);\n          } else {\n            this.router.navigate([\n              `admin/headless/dynamic/${signupJourneyDocType}/new`,\n            ]);\n          }\n        } else {\n          if (redirectUrlParams) return this.rediretToReturnUrl();\n\n          // this.router.navigate([roleroute]);\n          this.router.navigateByUrl(roleroute);\n        }\n      }\n    } else if (idToken.org_role == 'PlatformOwner') {\n      console.log('idToken.org_hkey', idToken.org_hkey);\n      const currentUrl = window.location.href;\n      console.log(currentUrl);\n\n      roleroute = appRoutes['PlatformOwner']\n        ? appRoutes['PlatformOwner']\n        : appRoutes['default'];\n\n      if (isSignupJourneyCompleted) {\n        console.log('Journey Completed');\n        this.router.navigate([roleroute]);\n      } else {\n        console.log('Journey not Completed');\n\n        const role_configurations: any = _.get(\n          app_data,\n          'role_configurations',\n          undefined\n        );\n\n        const signupJourneyDocType = _.get(\n          role_configurations,\n          'PlatformOwner.signupJourneyDocType'\n        );\n        console.log(\n          'Signup Journey DocType  =>',\n          _.get(role_configurations, 'PlatformOwner.signupJourneyDocType')\n        );\n\n        if (signupJourneyDocType) {\n          const displaySignupJourneyPopup = _.get(\n            role_configurations,\n            'PlatformOwner.displaySignupJourneyPopup'\n          );\n          console.log('displaySignupJourneyPopup', displaySignupJourneyPopup);\n\n          if (displaySignupJourneyPopup) {\n            // Display signup journey from popup\n            // this.openSignupJourneyDialog(roleroute, signupJourneyDocType);\n          } else {\n            this.router.navigate([\n              `admin/headless/dynamic/${signupJourneyDocType}/new`,\n            ]);\n          }\n        } else {\n          if (redirectUrlParams) return this.rediretToReturnUrl();\n\n          // this.router.navigate([roleroute]);\n          this.router.navigateByUrl(roleroute);\n        }\n      }\n    } else {\n      roleroute = appRoutes['Provider']\n        ? appRoutes['Provider']\n        : appRoutes['default'];\n\n      if (isSignupJourneyCompleted) {\n        console.log('Journey Completed');\n        this.router.navigate([roleroute]);\n      } else {\n        console.log('Journey not Completed');\n\n        const role_configurations: any = _.get(\n          app_data,\n          'role_configurations',\n          undefined\n        );\n\n        const signupJourneyDocType = _.get(\n          role_configurations,\n          'Provider.signupJourneyDocType'\n        );\n        console.log(\n          'Signup Journey DocType  =>',\n          _.get(role_configurations, 'Provider.signupJourneyDocType')\n        );\n\n        if (signupJourneyDocType) {\n          const displaySignupJourneyPopup = _.get(\n            role_configurations,\n            'Provider.displaySignupJourneyPopup'\n          );\n          console.log('displaySignupJourneyPopup', displaySignupJourneyPopup);\n\n          if (displaySignupJourneyPopup) {\n            // Display signup journey from popup\n            // this.openSignupJourneyDialog(roleroute, signupJourneyDocType);\n          } else {\n            this.router.navigate([\n              `admin/headless/dynamic/${signupJourneyDocType}/new`,\n            ]);\n          }\n        } else {\n          if (redirectUrlParams) return this.rediretToReturnUrl();\n          // this.router.navigate([roleroute]);\n          this.router.navigateByUrl(roleroute);\n        }\n      }\n    }\n  }\n\n  inviteUser(\n    email: string,\n    orgRole: string,\n    assignedUserRole?: string,\n    data?: any\n  ) {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    const currentUserData = this.globalService.userContext();\n    const appInfo = this.globalService.applicationMeta();\n    const parent_org_hkey = appInfo ? appInfo.org_hkey : '';\n    const orgid = this.generateDocId();\n    const org_hkey =\n      orgRole == currentUserData?.org_role\n        ? currentUserData?.org_hkey\n        : parent_org_hkey + '.' + orgid;\n    orgRole = orgRole ? orgRole : currentUserData?.org_role;\n    let user_id = '';\n    if (typeof data == 'string') {\n      user_id = data;\n    } else if (typeof data == 'object') {\n      user_id = data['doc_id'];\n    }\n    const userData = this.prepareUserMetadata(\n      orgRole,\n      org_hkey,\n      assignedUserRole,\n      user_id\n    );\n\n    // data = { ...data, ...userData };\n    return new Promise((resolve, reject) => {\n      this.auth0Client.signup(\n        {\n          connection: this.auth0_connection,\n          email: email,\n          password: 'hexitopnd@1234',\n          userMetadata: userData,\n        },\n        async (error: any, result: any): Promise<any> => {\n          if (error) {\n            this.globalService.setLoading(false);\n            // this.callSnackBar('Sign up failed. Please try again.');\n            const res = await this.changepassword(email);\n            console.error(error);\n            resolve('Reinvited user successfully');\n          } else {\n            console.log('result', result);\n            const res = await this.changepassword(email);\n            const authoId = 'auth0|' + result['Id'];\n            const uData = {\n              ...userData,\n              ...data,\n              email: email,\n              authoId: authoId,\n            };\n            this.createUserInBackend(\n              uData,\n              orgRole == currentUserData?.org_role\n            );\n            console.log(res);\n            resolve('User invited successfully');\n          }\n        }\n      );\n    });\n  }\n  signupWithSocial(\n    provider: any,\n    redirectUripath: string,\n    fn7DirectUser: boolean = false\n  ) {\n    // Get the query string from URL\n    let urlParamsString = window.location.search;\n    if (fn7DirectUser) {\n      urlParamsString = window.location.search\n        ? `${window.location.search}&fn7DirectUser=${encodeURIComponent(\n            fn7DirectUser\n          )}`\n        : `?fn7DirectUser=${encodeURIComponent(fn7DirectUser)}`;\n    }\n\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    let redirectUri =\n      this.auth0_callback_url + redirectUripath + urlParamsString;\n    console.log('redirectURI', redirectUri);\n    this.auth0Client.authorize({\n      connection: provider,\n      responseType: 'code',\n      redirectUri: this.auth0_callback_url + redirectUripath + urlParamsString,\n    });\n    console.log('google signup done');\n  }\n\n  sendVerificationMail() {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    this.auth0Client.passwordlessStart(\n      {\n        connection: this.auth0_connection,\n        // email: 'shubham.pancholi@fn7.io',\n        send: 'link',\n      },\n      function (err: any, result: any) {\n        if (err) {\n          // Handle error\n          console.error(err);\n        } else {\n          // Verification email sent\n          console.log(result);\n        }\n      }\n    );\n  }\n  changepassword(email: string): Promise<string> {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    return new Promise((resolve, reject) => {\n      this.auth0Client.changePassword(\n        {\n          connection: this.auth0_connection,\n          email: email,\n        },\n        (err: { description: any }, res: any) => {\n          if (err) {\n            reject(err.description);\n          } else {\n            resolve('Password reset email sent!');\n          }\n        }\n      );\n    });\n  }\n  setUserMetaData(\n    accessToken: any,\n    userId: any,\n    userMetadata: any,\n    isUpdate = false\n  ): Promise<void> {\n    console.log('setusermetaaa');\n\n    const management = new auth0.Management({\n      domain: this.custom_domain,\n      token: accessToken,\n    });\n    console.log('user meta update', userId, accessToken);\n    return new Promise((resolve, reject) => {\n      management.patchUserMetadata(\n        userId,\n        userMetadata,\n        async (err, updatedUser) => {\n          if (err) {\n            console.error(err);\n            reject();\n          } else {\n            console.log('User metadata updated successfully:', updatedUser);\n            if (!isUpdate) {\n              await this.checkSession(true, userMetadata);\n            }\n            resolve();\n            // Continue with your application logic after updating user metadata\n          }\n        }\n      );\n    });\n  }\n  createUserInBackend(data?: any, same_org: boolean = false): Promise<void> {\n    // data = { ...data, ...userMetadata };\n\n    const org_id = data.org_hkey.split('.').pop();\n    const orgData = {\n      doc_id: org_id,\n      org_hkey: data.org_hkey,\n      org_role: data.org_role,\n      name: data.name,\n      isActive: true,\n    };\n    const userData = {\n      doc_id: data.user_id,\n      ...data,\n      isActive: true,\n      isSignupJourneyCompleted: false,\n    };\n    console.log(data);\n    if (!same_org) {\n      console.log('orgdata', orgData);\n      this.fn7sdk\n        .createDocument('Fn7Organisations', orgData, null, [])\n        .subscribe();\n    }\n    return new Promise((resolve, reject) => {\n      console.log('userdata', userData);\n      this.fn7sdk\n        .createDocument('AppUsers', userData, null, [])\n        .subscribe(() => {\n          this.fn7sdk\n            .executeServerSideAction('globalCreateUserContact', userData)\n            .subscribe();\n          resolve();\n        });\n    });\n  }\n  handleAuthentication(userMetaData: any = ''): Promise<void | boolean> {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n\n    // Check if there's an authorization code in the URL parameters.\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get('code');\n\n    if (code) {\n      // Authorization code is present; exchange it for tokens.\n      return this.exchangeCodeForTokens(\n        code,\n        'authorization_code',\n        userMetaData\n      );\n    } else {\n      // No authorization code in URL parameters; parse the hash.\n      console.log('handleAuthentication');\n      return new Promise((resolve, reject) => {\n        const extractedParams: { [key: string]: string } = {};\n        urlParams.forEach((value, key) => {\n          extractedParams[key] = value;\n        });\n        if (\n          extractedParams['access_token'] &&\n          extractedParams['id_token'] &&\n          extractedParams['refresh_token'] &&\n          extractedParams['expires_in']\n        ) {\n          console.log(extractedParams);\n          this.setSessionAfterExchange(extractedParams);\n          const decodedToken = this.decodeIdToken(extractedParams['id_token']);\n          if (\n            userMetaData &&\n            !decodedToken?.org_hkey &&\n            !decodedToken?.org_role\n          ) {\n            this.setUserMetaData(\n              extractedParams['access_token'],\n              decodedToken.sub,\n              userMetaData\n            );\n            resolve(false);\n          } else {\n            resolve(true);\n          }\n        } else {\n          reject();\n        }\n      });\n    }\n  }\n\n  exchangeCodeForTokens(\n    code: string,\n    grantType: string,\n    userMetaData?: any\n  ): Promise<void> {\n    return new Promise(async (resolve: any, reject) => {\n      // Make a POST request to your auth0 to exchange the code for tokens.\n      // const url = `https://${this.custom_domain}/oauth/token`;\n      // const headers = new HttpHeaders({\n      //   'Content-Type': 'application/x-www-form-urlencoded',\n      // });\n\n      // const body = {\n      //   grant_type: 'authorization_code',\n      //   code: code,\n      //   client_id: this.auth0_client_id,\n      //   client_secret: this.auth0_client_secret,\n      //   redirect_uri: `${this.auth0_callback_url}/auth/callback/user/login`,\n      // };\n      // this.http\n      //   .post(url, body, { headers: headers })\n      //   .subscribe(\n      //     (data: any) => {\n      //       console.log(\"new token\", data);\n      //       if (data.access_token && data.id_token) {\n      //         // Tokens obtained from the backend.\n      //         this.setSession(data);\n      //         let decodedToken = this.decodeIdToken(data.idToken);\n      //         if (userMetaData && !decodedToken?.org_hkey && !decodedToken?.org_role) {\n      //           this.setUserMetaData(data.accessToken, decodedToken.sub, userMetaData)\n      //         }\n      //         resolve();\n      //       } else {\n      //         console.error('Failed to obtain tokens from backend');\n      //         reject('Failed to obtain tokens from backend');\n      //       }\n      //     },\n      //     (error) => {\n      //       console.error('Token exchange error:', error);\n      //       reject(error);\n      //     }\n      //   )\n\n      const refreshToken = localStorage.getItem('refresh_token');\n\n      if (\n        !refreshToken ||\n        refreshToken == 'undefined' ||\n        refreshToken == 'null' ||\n        refreshToken == null ||\n        refreshToken == undefined\n      ) {\n        try {\n          const session = await this.refreshSession();\n          resolve(session);\n        } catch (error) {\n          reject(error);\n        }\n        return;\n      }\n\n      const bodyData: any = {\n        grant_type: grantType,\n        client_secret: this.auth0_client_secret,\n        client_id: this.auth0_client_id,\n        redirect_uri: this.auth0_callback_url + '/auth/callback/user/login',\n      };\n      const access_key =\n        grantType == 'authorization_code' ? 'code' : 'refresh_token';\n      bodyData[access_key] = code;\n      const urlEncodedData = Object.keys(bodyData)\n        .map(\n          (key) =>\n            `${encodeURIComponent(key)}=${encodeURIComponent(bodyData[key])}`\n        )\n        .join('&');\n\n      this.loader.setLoading(true);\n      fetch(`https://${this.custom_domain}/oauth/token`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: urlEncodedData,\n      })\n        .then((response) => response.json())\n        .then(async (data) => {\n          this.loader.setLoading(false);\n\n          console.log('new token', data);\n          if (data.access_token && data.id_token) {\n            // Tokens obtained from the backend.\n            this.setSessionAfterExchange(data);\n            const decodedToken = this.decodeIdToken(data.idToken);\n            if (\n              userMetaData &&\n              !decodedToken?.org_hkey &&\n              !decodedToken?.org_role\n            ) {\n              await this.setUserMetaData(\n                data.access_token,\n                decodedToken.sub,\n                userMetaData\n              );\n              resolve(false);\n            } else {\n              resolve(true);\n            }\n          } else {\n            this.loader.setLoading(false);\n\n            console.error('Failed to obtain tokens from backend');\n\n            this.logout();\n            reject('Failed to obtain tokens from backend');\n          }\n        })\n        .catch((error) => {\n          console.error('Token exchange error:', error);\n          reject(error);\n        });\n    });\n  }\n\n  checkSession(signup: boolean = false, userMetadata: any = {}): Promise<void> {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    console.log('check session');\n    return new Promise((resolve, reject) => {\n      this.auth0Client.checkSession(\n        { redirectUri: this.auth0_callback_url + '/admin/callback/user/login' },\n        async (error: any, authResult: any) => {\n          if (error) {\n            console.error(error);\n            reject(error);\n          } else {\n            console.log('new token');\n            if (authResult && authResult.accessToken && authResult.idToken) {\n              this.setSession(authResult);\n              if (signup) {\n                const data = this.decodeIdToken();\n                const userData = {\n                  user_id: data.user_id,\n                  name: data.name,\n                  org_role: data.org_role,\n                  user_role: data.user_role,\n                  org_hkey: data.org_hkey,\n                  email: data.email,\n                  fn7DirectUser: userMetadata.fn7DirectUser,\n                  utm_source: userMetadata.utm_source,\n                  utm_medium: userMetadata.utm_medium,\n                  utm_campaign: userMetadata.utm_campaign,\n                };\n                await this.createUserInBackend(userData);\n              }\n              resolve();\n            } else {\n              console.error('Failed to renew the session');\n              this.logout();\n              reject(new Error('Failed to renew the session'));\n            }\n          }\n        }\n      );\n    });\n  }\n\n  setSessionAfterExchange(authResult: any) {\n    // Set the time that the access token will expire at\n    console.log('setsessionforcode');\n    const expiresAt = JSON.stringify(\n      authResult.expires_in ||\n        authResult.expiresIn * 1000 + new Date().getTime()\n    );\n    localStorage.setItem(\n      'access_token',\n      authResult.access_token || authResult.accessToken\n    );\n    localStorage.setItem('id_token', authResult.id_token || authResult.idToken);\n    localStorage.setItem(\n      'refresh_token',\n      authResult.refresh_token || authResult.refreshToken\n    );\n    localStorage.setItem('expires_at', expiresAt);\n    localStorage.setItem('user_context', JSON.stringify(this.decodeIdToken()));\n  }\n\n  setSession(authResult: any) {\n    // Set the time that the access token will expire at\n    console.log('setsession');\n    const expiresAt = JSON.stringify(\n      authResult.expiresIn * 1000 + new Date().getTime()\n    );\n    localStorage.setItem('access_token', authResult.accessToken);\n    localStorage.setItem('id_token', authResult.idToken);\n    //localStorage.setItem('refresh_token', authResult.refreshToken);\n    localStorage.setItem('expires_at', expiresAt);\n    localStorage.setItem('user_context', JSON.stringify(this.decodeIdToken()));\n  }\n\n  getUserData(): Promise<any> {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    return new Promise((resolve, reject) => {\n      const accessToken = localStorage.getItem('access_token');\n      if (!accessToken) {\n        reject('Access token not found');\n        return;\n      }\n      this.auth0Client.client.userInfo(accessToken, (err: any, user: any) => {\n        if (err) {\n          console.log(err);\n          reject(err);\n        }\n        const userData = this.globalService.userContext();\n        user = { ...userData, ...user };\n        localStorage.setItem('user_context', JSON.stringify(user));\n        resolve(user);\n      });\n    });\n  }\n  async isEmailVerified(): Promise<boolean> {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise<boolean>(async (resolve, reject) => {\n      try {\n        let user = this.globalService.userContext();\n        if (!user) {\n          user = await this.getUserData();\n        }\n        console.log(user.email_verified);\n        resolve(user.email_verified);\n      } catch (error) {\n        console.error(error);\n        reject(false);\n      }\n    });\n  }\n\n  get isLoggedIn(): boolean {\n    // Check whether the current time is past the\n    // access token's expiry time\n    const expiresAt = JSON.parse(localStorage.getItem('expires_at') || '{}');\n    return new Date().getTime() < expiresAt;\n  }\n  logout() {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    // Save the value of `app_context` temporarily\n    const appContext: any = localStorage.getItem('app_context');\n    const theme: any = localStorage.getItem('theme');\n    const serverUrl: any = localStorage.getItem('server_url');\n\n    // Clear the local storage\n    localStorage.clear();\n\n    // Restore the value of `app_context`\n    localStorage.setItem('app_context', appContext);\n    if (theme) localStorage.setItem('theme', theme);\n    localStorage.setItem('server_url', serverUrl);\n\n    const returnUrl = window.location.origin + '/auth/login';\n    console.log('logout', this.auth0Client);\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.router.navigate(['/auth/login']);\n\n      return;\n    }\n    this.auth0Client.logout({\n      returnTo: returnUrl,\n    });\n  }\n\n  refreshAccessToken(refreshToken: any) {\n    if (!this.auth0Client && typeof this.auth0Client === 'undefined') {\n      this.getAuth0Config();\n    }\n    return this.exchangeCodeForTokens(refreshToken, 'refresh_token');\n  }\n\n  callSnackBar(msg: string) {\n    this.snackbar.openSnackBar(msg);\n  }\n\n  decodeIdToken(idToken: any = ''): any {\n    if (!idToken) {\n      idToken = localStorage.getItem('id_token');\n    }\n    if (idToken) {\n      const decoded: any = jwtDecode(idToken);\n      return decoded;\n    }\n    return null;\n  }\n\n  prepareUserMetadata(\n    role: any,\n    org_hkey?: any,\n    userRole?: any,\n    user_id?: string,\n    userData = {}\n  ) {\n    console.log('user_id', user_id);\n    user_id = user_id ? user_id : this.generateDocId();\n    const org_id = this.generateDocId();\n    const appInfo = this.globalService.applicationMeta();\n    userRole = userRole\n      ? userRole\n      : appInfo.role_configurations[role].defaultUserSignUpRole;\n\n    let parent_org_hkey;\n    if (role == 'PlatformOwner') {\n      parent_org_hkey = '7000000001';\n    } else {\n      parent_org_hkey = appInfo ? appInfo.org_hkey : '';\n    }\n\n    const userMetadata = {\n      user_id: user_id,\n      org_role: role,\n      user_role: userRole,\n      org_hkey: org_hkey ? org_hkey : parent_org_hkey + '.' + org_id,\n      application_id: appInfo.doc_id,\n    };\n    return userMetadata;\n  }\n\n  generateDocId() {\n    return Math.random().toString().slice(2, 12);\n  }\n\n  // store the URL so we can redirect after logging in\n  setReturnUrlParams() {\n    const returnUrlParams = {\n      path: window.location.pathname,\n      query: window.location.search,\n    };\n    localStorage.setItem(\n      'redirect_url_params',\n      JSON.stringify(returnUrlParams)\n    );\n  }\n  get getReturnUrlParams() {\n    const param = localStorage.getItem('redirect_url_params');\n    if (param) {\n      return JSON.parse(param);\n    } else {\n      return null;\n    }\n  }\n\n  rediretToReturnUrl() {\n    const returnUrlParams = this.getReturnUrlParams;\n    if (returnUrlParams) {\n      const url = returnUrlParams.path + returnUrlParams.query;\n      localStorage.removeItem('redirect_url_params');\n      this.router.navigateByUrl(url);\n    }\n  }\n\n  redirectToDefaultRoute() {\n    const appRoutes = this.globalService.applicationMeta().appRoutes;\n    const orgRole = this.globalService.userContext().org_role;\n    const defaultRoute = appRoutes[orgRole] || appRoutes.default;\n\n    this.router.navigateByUrl(defaultRoute);\n  }\n\n  async getManagementToken() {\n    const clientId = '7wmlCy4lUWHW3XrwsAAyNB9RBCBf3Rwy';\n    const clientSecret =\n      'rlGY-MchpybcSmnydrZFMS0SucyJ6xAb2JJ5ZEaMAXyYtzaS9XzW5S8co6TrxNmT';\n    const audience = `https://${this.auth0_domain}/api/v2/`;\n    const url = `https://${this.auth0_domain}/oauth/token`;\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          client_id: clientId,\n          client_secret: clientSecret,\n          audience: audience,\n          grant_type: 'client_credentials',\n        }),\n      });\n\n      const data = await response.json();\n      return data.access_token;\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n\n  async getUserByEmail(access_token: any, email: any) {\n    const getUsersUrl = `https://${this.auth0_domain}/api/v2/users-by-email?email=${email}`;\n    try {\n      const response = await fetch(getUsersUrl, {\n        method: 'GET',\n        headers: {\n          Authorization: `Bearer ${access_token}`,\n        },\n      });\n\n      const userData = await response.json();\n      return userData;\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n\n  async updateBlockStatus(access_token: any, userId: any, block: boolean) {\n    const body = { blocked: block };\n    const getUsersUrl = `https://${this.auth0_domain}/api/v2/users/${userId}`;\n    try {\n      const response = await fetch(getUsersUrl, {\n        method: 'PATCH',\n        headers: {\n          Authorization: `Bearer ${access_token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ blocked: block }),\n      });\n\n      const userData = await response.json();\n      return userData;\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n\n  async changeUserRole(\n    email: any,\n    newUserRole: any,\n    doc_id: string,\n    authoId?: string\n  ) {\n    try {\n      const access_token = await this.getManagementToken();\n      let userId;\n      let userData;\n      let updatedmetaData: any = {};\n      if (authoId == undefined) {\n        userData = await this.getUserByEmail(access_token, email);\n        userId = userData[0].user_id;\n        updatedmetaData = userData[0].user_metadata;\n      }\n      userId = userId == undefined ? authoId : userId;\n      updatedmetaData['user_role'] = newUserRole;\n      const response = await this.setUserMetaData(\n        access_token,\n        userId,\n        updatedmetaData,\n        true\n      );\n      const data = { user_role: newUserRole };\n      this.fn7sdk\n        .updateDocument('AppUsers', doc_id, data, null, [])\n        .subscribe();\n    } catch (error) {\n      console.error('Error:', error);\n      // Handle or propagate the error as needed\n    }\n  }\n\n  async changeUserStatus(\n    email: string,\n    block: boolean,\n    doc_id: string,\n    authoId?: string\n  ) {\n    try {\n      const access_token = await this.getManagementToken();\n      let userId;\n      if (authoId == undefined) {\n        const userData = await this.getUserByEmail(access_token, email);\n        userId = userData[0].user_id;\n      }\n      userId = userId == undefined ? authoId : userId;\n      await this.updateBlockStatus(access_token, userId, block);\n      const data = { isActive: !block };\n      this.fn7sdk\n        .updateDocument('AppUsers', doc_id, data, null, [])\n        .subscribe(() => {\n          const message = block\n            ? 'User In-Active Successfully'\n            : 'User Active Successsfully';\n          this.callSnackBar(message);\n        });\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  }\n\n  async changeOrgStatus(doc_id: string, block: boolean) {\n    try {\n      const data = { isActive: !block };\n      const res: any = this.fn7sdk\n        .updateDocument('Fn7Organisations', doc_id, data, null, [])\n        .subscribe();\n    } catch (error) {\n      console.log('Error:', error);\n    }\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable, catchError, map, of, throwError } from 'rxjs';\nimport { Fn7QueryParams } from '../PlatformConstants';\nimport { GlobalService } from './global.service';\nimport { omitBy as lomitBy, isNil as lisNil } from 'lodash';\nimport { isPlatformBrowser } from '@angular/common';\nimport { PLATFORM_ID } from '@angular/core';\n@Injectable({\n  providedIn: 'root',\n})\nexport class DataService {\n  private prefix = '/api';\n\n  constructor(\n    private http: HttpClient,\n    private sdk: GlobalService,\n    @Inject(PLATFORM_ID) private platformId: any\n  ) {}\n\n  executeServerSideAction = (\n    ssaName: string,\n    payload?: any,\n    queryParams: Fn7QueryParams = {},\n    customHeaders?: []\n  ): Observable<any> => {\n    const request = this.http.authorize().setCustomHeaders(customHeaders);\n    const url = `${this.prefix}/lambda/${ssaName}`;\n    const query_params = {\n      ...queryParams,\n      cckey: this.checksum(this.getCCKeyString()),\n    };\n    const params = this.encodeQueryParams(query_params);\n    if (payload) {\n      return request.post(url, payload, { params: params }).pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n    } else {\n      return request.get(url, { params: params }).pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n    }\n  };\n\n  getDocument = (\n    doc_type: string,\n    doc_id: string,\n    callback?: any,\n    customHeaders?: [],\n    queryParams?: any\n  ): Observable<any> => {\n    const query_params = {\n      ...queryParams,\n      cckey: this.checksum(this.getCCKeyString()),\n    };\n    const params = this.encodeQueryParams(query_params);\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .get(`${this.prefix}/${doc_type}/${doc_id}`, { params: params })\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  getDocuments = (\n    doc_type: string,\n    query_params: Fn7QueryParams = {},\n    callback?: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    query_params['cckey'] = this.checksum(this.getCCKeyString());\n    const cleanedObject = lomitBy(query_params, lisNil);\n    console.log(' getDocuments query_params', cleanedObject);\n    const params = this.encodeQueryParams(cleanedObject);\n    console.log('params', params);\n    return (\n      this.http\n        // .authorize()\n        .setCustomHeaders(customHeaders)\n        .get(`${this.prefix}/${doc_type}`, { params })\n        .pipe(\n          map((data) => {\n            return data;\n          }),\n          catchError((err) => {\n            console.log(\n              'ASS Cached route DynamicRenderComponent RESOLVER getDocuments err => ',\n              err\n            );\n            return throwError(() => err);\n          })\n        )\n    );\n  };\n  exportData = (\n    doc_type: string,\n    query_params: Fn7QueryParams = {},\n    exportFields: any,\n    callback?: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    query_params['cckey'] = this.checksum(this.getCCKeyString());\n    const cleanedObject = lomitBy(query_params, lisNil);\n    console.log(' exports query_params', cleanedObject);\n    const params = this.encodeQueryParams(cleanedObject);\n    console.log('params', params);\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .post(`${this.prefix}/export/${doc_type}`, exportFields, { params })\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          console.log('error', err);\n          return throwError(() => err);\n        })\n      );\n  };\n  encodeQueryParams = (query_params: any) => {\n    let params = new HttpParams();\n    console.log(query_params);\n    const keys = Object.keys(query_params);\n    for (let i = 0; i < keys.length; i++) {\n      const key = keys[i];\n      let value = query_params[key];\n      // console.log(key, value)\n      if (typeof value === 'object') {\n        value = JSON.stringify(value);\n      }\n      params = params.append(key, encodeURIComponent(value));\n    }\n    // console.log(\"params\", params)\n    return params;\n  };\n  createDocument = (\n    doc_type: any,\n    data: any,\n    callback: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    if (!data.doc_id) {\n      data.doc_id = this.generateDocId();\n    }\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .post(`${this.prefix}/${doc_type}/${data.doc_id}`, data)\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  updateDocument = (\n    doc_type: any,\n    doc_id: any,\n    data: any,\n    upsert: any = false,\n    callback: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .put(`${this.prefix}/${doc_type}/${doc_id}`, data)\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  deleteDocument = (\n    doc_type: any,\n    doc_id: any,\n    callback: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .delete(`${this.prefix}/${doc_type}/${doc_id}`)\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  createApplication = (\n    application_id: string,\n    data: any,\n    callback: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .post(`${this.prefix}/application/${application_id}`, data)\n      .pipe(\n        map((data) => {\n          console.log('Application created successfully.', data);\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  createBulkDocuments = (\n    data: any,\n    doc_type: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .put(`${this.prefix}/dumpBulkData/${doc_type}`, data)\n      .pipe(\n        map((response) => {\n          console.log('Mapped fields sent successfully.', response);\n          return response;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  sendEmail = (\n    from: any,\n    to: any,\n    subject: any,\n    body: any,\n    callback: any,\n    customHeaders?: []\n  ): Observable<any> => {\n    console.log('browser sdk');\n    const email_body = {\n      from: from,\n      to: to,\n      subject: subject,\n      body: body,\n    };\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .put(`${this.prefix}/send-email`, email_body)\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  generateDocId = () => {\n    return Math.random().toString().slice(2, 12);\n  };\n\n  getWorkflowFileFromBackend = (\n    urlPath: string,\n    params: any\n  ): Observable<any> => {\n    return this.http\n      .get(`${this.prefix}/k8s/${urlPath}`, { responseType: 'text' })\n      .pipe(\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  getCCKeyString = () => {\n    const userOrgHkey = this.sdk.getUserOrgHkey();\n    const orgRole = this.sdk.getUserOrgRole();\n    const userRole = this.sdk.getUserRole();\n    const extendedParams = this.getExtendedParams();\n    if (extendedParams) {\n      return `${userOrgHkey}.${orgRole}.${userRole}.${extendedParams}`;\n    }\n    return `${userOrgHkey}.${orgRole}.${userRole}`;\n  };\n\n  checksum = (string: string) => {\n    let hash = 0x12345678;\n    const len = string.length;\n    for (let i = 0; i < len; i++) {\n      hash += string.charCodeAt(i) * (i + 1);\n    }\n    return (hash & 0xffffffff).toString(16);\n  };\n\n  // nivy now lets keep this function here for now\n  userContext = (): any => {\n    if (isPlatformBrowser(this.platformId)) {\n      const userContext = localStorage.getItem('user_context') || '{}';\n      return JSON.parse(userContext);\n    } else {\n      // Return a default value or handle server-side logic here\n      return {};\n    }\n  };\n  applicationMeta = () => {\n    if (isPlatformBrowser(this.platformId)) {\n      const appContext = localStorage.getItem('app_context') || '{}';\n      return JSON.parse(appContext);\n    } else {\n      return {};\n    }\n  };\n  applicationName = () => {\n    const app_context = this.applicationMeta();\n    return app_context?.application_url_prefix;\n  };\n  getUserRole = (): any => {\n    const userMeta = this.userContext();\n    return userMeta?.user_role;\n  };\n  getOrgRole = (): any => {\n    const userMeta = this.userContext();\n    return userMeta?.org_role;\n  };\n\n  getExtendedParams = (): any => {\n    let extendedParams = isPlatformBrowser(this.platformId)\n      ? localStorage.getItem('extended_params') || '{}'\n      : '{}';\n    extendedParams = JSON.parse(extendedParams);\n    const objValues = Object.values(extendedParams);\n    if (objValues.length > 0) {\n      return objValues.join('.');\n    }\n    return false;\n  };\n\n  chat = (\n    payload: any,\n    customHeaders?: [],\n    queryParams?: Fn7QueryParams\n  ): Observable<any> => {\n    const cleanedObject = lomitBy(queryParams, lisNil);\n    // console.log(\" AI CHAT query_params\", cleanedObject)\n    const params = this.encodeQueryParams(cleanedObject);\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .put(`${this.prefix}/k8s/ai-chat`, payload, { params })\n      .pipe(\n        map((data) => {\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n\n  documentSummary = (\n    payload: any,\n    queryParams?: Fn7QueryParams,\n    customHeaders?: []\n  ): Observable<any> => {\n    const cleanedObject = lomitBy(queryParams, lisNil);\n    const params = this.encodeQueryParams(cleanedObject);\n\n    return this.http\n      .authorize()\n      .setCustomHeaders(customHeaders)\n      .put(`${this.prefix}/k8s/doc-summarize`, payload, { params })\n      .pipe(\n        map((data) => {\n          console.log('data ->', data);\n          return data;\n        }),\n        catchError((err) => {\n          return throwError(() => err);\n        })\n      );\n  };\n}\n","import {\n  Inject,\n  Injectable,\n  Injector,\n  NgZone,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { ORG_HKEY, ORG_ROLE, APP_CONTEXT } from '../PlatformConstants';\n// import { DialogReferenceComponent } from 'libs/fn7-ui-renderer/src/lib/other/dialog-reference/dialog-reference.component';\n// import { PrintManagerComponent } from 'libs/standalone-modules/src/lib/print-manager/print-manager.component';\nimport { Router } from '@angular/router';\nimport { isPlatformBrowser } from '@angular/common';\nimport * as Sentry from '@sentry/angular';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class GlobalService {\n  private helixUserInputSubject: Subject<any> = new Subject<any>();\n  constructor(\n    private injector: Injector,\n    private zone: NgZone,\n    private router: Router,\n    @Inject(PLATFORM_ID) private platformId: any\n  ) {}\n\n  private loading = false;\n  private loadingMessage = '';\n  // private globalDialogRef: MatDialogRef<any> | null = null;\n  scope = Sentry.getCurrentScope();\n  setLoading(loading: boolean) {\n    // alert('in loader service' + loading);\n    if (!loading) {\n      this.loadingMessage = '';\n    }\n    this.loading = loading;\n  }\n  getLoading() {\n    return this.loading;\n  }\n  getLoadingMessage() {\n    return this.loadingMessage;\n  }\n  setLoadingMessage(loadingMessage: string) {\n    this.loadingMessage = loadingMessage;\n  }\n  getHelixUserInput(): Observable<any> {\n    return this.helixUserInputSubject;\n  }\n  setHelixUserInput(input: any) {\n    this.helixUserInputSubject.next(input);\n  }\n\n  // for no application renderer\n\n  // private renderersErrorSubject = new Subject<string>();\n\n  // renderersError$ = this.renderersErrorSubject.asObservable();\n\n  // triggerRenderersError(errorMessage: string): void {\n  //   this.renderersErrorSubject.next(errorMessage);\n  // }\n\n  setTheme(theme: string) {\n    this.setLocalStorageItem('theme', theme);\n  }\n  get getTheme() {\n    return this.getLocalStorageItem('theme')\n      ? this.getLocalStorageItem('theme')\n      : 'darkMode';\n  }\n\n  userContext = (): any => {\n    const userContext = this.getLocalStorageItem('user_context') || '{}';\n    return JSON.parse(userContext);\n  };\n\n  getUserOrgHkey = () => {\n    const userMeta = this.userContext();\n    return userMeta[ORG_HKEY];\n  };\n\n  getUserOrgRole = () => {\n    const userMeta = this.userContext();\n    return userMeta[ORG_ROLE];\n  };\n\n  getUserRole = (): any => {\n    const userMeta = this.userContext();\n    return userMeta?.user_role;\n  };\n\n  applicationMeta = () => {\n    const appContext = this.getLocalStorageItem(APP_CONTEXT) || '{}';\n    return JSON.parse(appContext);\n  };\n\n  applicationName = () => {\n    const app_context = this.applicationMeta();\n    return app_context?.application_url_prefix;\n  };\n\n  // get app context\n  get getAppContext() {\n    return JSON.parse(this.getLocalStorageItem('app_context') || '{}');\n  }\n\n  get getUSerContext() {\n    return JSON.parse(this.getLocalStorageItem('user_context') || '{}');\n  }\n\n  getLocalStorageItem(key: string): string | null {\n    if (isPlatformBrowser(this.platformId)) {\n      return localStorage.getItem(key);\n    }\n    return null;\n  }\n\n  setLocalStorageItem(key: string, value: string): void {\n    if (isPlatformBrowser(this.platformId)) {\n      localStorage.setItem(key, value);\n    }\n  }\n\n  // sentry methods\n  setSentryTag(key: string, value: any) {\n    Sentry.setTag(key, value);\n  }\n  setSentryUser(user: { id: string; email: string }) {\n    Sentry.setUser(user);\n  }\n  // log to sentry\n  logToSentry(error: any, additionalInfo?: any) {\n    // // console.log('Logging to sentry', error);\n    // Sentry.setContext('character', {\n    //   name: 'Mighty Fighter',\n    //   age: 19,\n    //   attack_type: 'melee',\n    // });\n    Sentry.captureException(error, additionalInfo);\n  }\n  setSetryContext(name: string, context: { [key: string]: any } | null) {\n    Sentry.setContext(name, context);\n  }\n\n  sentry = () => {\n    return Sentry;\n  };\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport * as _ from 'lodash';\nimport { isPlatformBrowser } from '@angular/common';\nimport { TransferState, makeStateKey } from '@angular/platform-browser';\n// import * as uuidPfrom 'uuid';\n/**\n * Prefixes all requests with relative url.\n */\nimport * as Sentry from '@sentry/angular';\n\nconst HOST_NAME = makeStateKey('HOST_NAME');\nconst HOST = makeStateKey('HOST');\n\n@Injectable()\nexport class ApiPrefixInterceptor implements HttpInterceptor {\n  constructor(\n    private injector: Injector,\n    @Inject(PLATFORM_ID) private platformId: any,\n    private transferState: TransferState\n  ) {}\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    const server_uri = 'https://helix.dev.app.fn7.io/'; // new URL((localStorage.getItem('server_url') ? localStorage.getItem('server_url') : localStorage.getItem('server_url')) ||  \"https://carsales.dev.app.fn7.io/\");\n    const host_name = isPlatformBrowser(this.platformId)\n      ? location.hostname\n      : this.transferState.get(HOST_NAME, null);\n    const host = isPlatformBrowser(this.platformId)\n      ? location.host\n      : this.transferState.get(HOST_NAME, null);\n    const domain_check = request.url;\n    const current_host =\n      host_name == 'localhost' ? new URL(server_uri).host : host;\n    console.log('current_host: ===>', current_host);\n\n    // headers\n    const headers: any = {};\n    let correlationId = Math.random().toString().slice(2);\n    headers['Correlation-id'] = correlationId; //uuid();\n    console.log(\n      'CustomHeadersInterceptor: settings Correlation-id ',\n      headers['Correlation-id']\n    );\n    // setting correlation  to log monitor\n    // Sentry.setTag('transactionId', correlationId);\n\n    const fn7_helix_application_id =\n      this.getLocalStorageItem('fn7_helix_application_id') || null;\n    if (fn7_helix_application_id && request.url.includes('Fn7Helix')) {\n      headers['Fn7-helix-application-id'] = fn7_helix_application_id;\n    }\n    headers[`x-fn7-host`] = current_host;\n    headers[`x-fn7-active-listener`] =\n      this.getLocalStorageItem('activeListener') || '';\n\n    const currentSubPlan: any = JSON.parse(\n      this.getLocalStorageItem('currentPlan') || '{}'\n    );\n    console.log('currentSubPlan', currentSubPlan);\n    if (Object.keys(currentSubPlan).length > 0) {\n      headers[`x-fn7-active-plan`] =\n        (currentSubPlan?.subscription_plan_id\n          ? currentSubPlan?.subscription_plan_id\n          : 'standard') ||\n        (currentSubPlan?.sub_id ? currentSubPlan?.sub_id : 'standard');\n    } else {\n      headers[`x-fn7-active-plan`] = 'standard';\n    }\n    const requestExtendedData = JSON.parse(\n      this.getLocalStorageItem('x-fn7-extended-data') || '{}'\n    );\n    if (Object.keys(requestExtendedData).length > 0) {\n      headers['x-fn7-extended-data'] = JSON.stringify(requestExtendedData);\n    }\n    // chare  app name here to check locally\n    const dev_current_host_url = 'http://localhost:8080' + request.url; //'https://' + 'helix.dev.app.fn7.io' + request.url\n    // const dev_current_host_url =\n    'https://' + 'fainr.dev.app.fn7.io' + request.url;\n\n    // Non-Fastly domains\n    if (\n      domain_check.indexOf('storage.googleapis.com') == -1 &&\n      domain_check.indexOf(\n        'dev-public-objectstore-fn7.storage.googleapis.com'\n      ) == -1 &&\n      domain_check.indexOf('fn7.dev.app.fn7.io/api/file/app') == -1 &&\n      domain_check.indexOf('fn7-backend.us-central1-dev.k8s.gcp.fn7.io') ==\n        -1 &&\n      domain_check.indexOf('localhost') == -1\n    ) {\n      console.log('storage.googleapis.com');\n      let url =\n        host_name !== 'localhost'\n          ? dev_current_host_url\n          : 'https://' + current_host + request.url;\n      if (\n        host_name !== 'localhost' &&\n        (request.url.includes('js') ||\n          request.url.includes('payment') ||\n          request.url.includes('chat'))\n      ) {\n        url = `http://localhost:8080` + request.url;\n      }\n\n      console.log('CustomHeadersInterceptor: ALL HEADERS', headers, request);\n      request = request.clone({\n        url: url,\n        setHeaders: headers,\n      });\n    }\n\n    // if url includes templates add platform version to the url\n    if (request.url.includes('templates')) {\n      const platformVersion =\n        this.getLocalStorageItem('PLATFORM-VERSION') == 'null'\n          ? 'V1'\n          : this.getLocalStorageItem('PLATFORM-VERSION') || 'V1';\n      request = request.clone({\n        url: request.url + `?platform_version=${platformVersion}`,\n      });\n    }\n    console.log('request: ===>', request);\n\n    // Request\n    return next.handle(request);\n  }\n\n  getLocalStorageItem(key: string): string | null {\n    if (isPlatformBrowser(this.platformId)) {\n      return localStorage.getItem(key);\n    }\n    return null;\n  }\n}\n","import { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport {\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Observable, throwError, BehaviorSubject, from } from 'rxjs';\nimport {\n  catchError,\n  switchMap,\n  filter,\n  take,\n  finalize,\n  mergeMap,\n} from 'rxjs/operators';\nimport { AuthenticationService } from '../authentication.service';\nimport { isPlatformBrowser } from '@angular/common';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n  private isRefreshing = false;\n  private refreshTokenSubject: BehaviorSubject<any> = new BehaviorSubject<any>(\n    null\n  );\n\n  constructor(\n    private authenticationService: AuthenticationService,\n    @Inject(PLATFORM_ID) private platformId: any\n  ) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    const idToken = this.getLocalStorageItem('id_token');\n    const expirationTime = this.getLocalStorageItem('expires_at');\n\n    // if (!idToken || !expirationTime) {\n    //   this.authenticationService.logout();\n    //   return throwError(\"No token or token expired\");\n    // }\n\n    if (idToken && expirationTime) {\n      const currentTime = new Date().getTime();\n      const expirationTimestamp = parseInt(expirationTime, 10);\n\n      if (currentTime > expirationTimestamp) {\n        if (!this.isRefreshing) {\n          this.isRefreshing = true;\n          const refreshToken = this.getLocalStorageItem('refresh_token');\n          if (refreshToken) {\n            this.refreshTokenSubject.next(null);\n\n            return from(\n              this.authenticationService.refreshAccessToken(refreshToken)\n            ).pipe(\n              mergeMap((token: any) => {\n                this.isRefreshing = false;\n                this.refreshTokenSubject.next(token);\n                const idToken = this.getLocalStorageItem('id_token'); // Retrieve the refreshed idToken\n                return next.handle(this.attachTokenToRequest(request, idToken));\n              }),\n              catchError((error) => {\n                this.isRefreshing = false;\n                this.authenticationService.logout();\n                return throwError(error);\n              }),\n              finalize(() => {\n                this.refreshTokenSubject.next(null);\n              })\n            );\n          } else {\n            return from(this.authenticationService.refreshSession()).pipe(\n              mergeMap(() => {\n                this.isRefreshing = false;\n                const idToken = this.getLocalStorageItem('id_token'); // Retrieve the refreshed idToken\n                return next.handle(this.attachTokenToRequest(request, idToken));\n              }),\n              catchError((e) => {\n                this.isRefreshing = false;\n                this.authenticationService.logout();\n                return throwError(e);\n              })\n            );\n          }\n        } else {\n          return this.refreshTokenSubject.pipe(\n            filter((token) => token !== null),\n            take(1),\n            switchMap(() => {\n              const idToken = this.getLocalStorageItem('id_token'); // Retrieve the refreshed idToken\n              return next.handle(this.attachTokenToRequest(request, idToken));\n            })\n          );\n        }\n      } else {\n        return next.handle(this.attachTokenToRequest(request, idToken));\n      }\n    }\n\n    return next.handle(request);\n  }\n\n  private attachTokenToRequest(\n    request: HttpRequest<any>,\n    token: any\n  ): HttpRequest<any> {\n    return request.clone({\n      setHeaders: {\n        Authorization: token,\n      },\n    });\n  }\n  getLocalStorageItem(key: string): string | null {\n    if (isPlatformBrowser(this.platformId)) {\n      return localStorage.getItem(key);\n    }\n    return null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport * as _ from 'lodash';\nimport { CustomHeadersObject } from './http.service';\n\n@Injectable()\nexport class CustomHeadersInterceptor implements HttpInterceptor {\n  constructor() {\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    console.log('configure CustomHeadersInterceptor ');\n  }\n\n  private customHeaders: CustomHeadersObject[] = [];\n\n  configure(\n    options?: { customHeaders?: CustomHeadersObject[] } | null\n  ): CustomHeadersInterceptor {\n    console.log('configure CustomHeadersInterceptor ', options);\n    const instance = new CustomHeadersInterceptor();\n    if (options && options.customHeaders) {\n      instance.customHeaders = options.customHeaders;\n    }\n    return instance;\n  }\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    if (this.customHeaders.length > 0) {\n      console.log('intercept CustomHeadersInterceptor ', this.customHeaders);\n      const headers: any = {};\n      _.each(this.customHeaders, (element, key) => {\n        // let headerKey = _.keys(value)[0];\n        // if (element.headerKey)\n        headers[element.headerKey] = element.headerValue;\n      });\n      console.log('request intercept CustomHeadersInterceptor ', headers);\n      _.each(request.headers.keys(), (key) => {\n        console.log('existing headers CustomHeadersInterceptor ', key);\n        headers[key] = request.headers.get(key);\n      });\n      // headers['Correlation-id'] = Math.random().toString().slice(2, 12);\n      // console.log('CustomHeadersInterceptor: settings Correlation-id ', headers['Correlation-id']);\n      // const fn7_helix_application_id = localStorage.getItem('fn7_helix_application_id') || null;\n      // if(fn7_helix_application_id && (request.url.includes('Fn7Helix'))) {\n      //   headers['Fn7-helix-application-id'] = fn7_helix_application_id;\n      // }\n      console.log('CustomHeadersInterceptor: ALL HEADERS', headers);\n      request = request.clone({\n        setHeaders: headers,\n      });\n    }\n    return next.handle(request);\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport {\n  HttpEvent,\n  HttpErrorResponse,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { SnackbarService } from '../snackbar.service';\nimport { AuthenticationService } from '../authentication.service';\nimport { GlobalService } from '../global.service';\n\n/**\n * Adds a default error handler to all requests.\n */\n@Injectable()\nexport class ErrorHandlerInterceptor implements HttpInterceptor {\n  constructor(\n    private injector: Injector,\n    private snackbar: SnackbarService,\n    private gloalService: GlobalService\n  ) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log(' ErrorHandlerInterceptor is called');\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    return next\n      .handle(request)\n      .pipe(catchError((error) => this.errorHandler(error, next, request)));\n  }\n\n  private errorHandler(\n    response: HttpErrorResponse,\n    next: HttpHandler,\n    request: HttpRequest<any>\n  ): Observable<HttpEvent<any>> {\n    const authenticationService = this.injector.get(AuthenticationService);\n    if (response['status'] !== 200) {\n      // logging to sentry\n      this.gloalService.setSentryTag('ErrorStatus', response['status']);\n      this.gloalService.setSetryContext('Error Info ', {\n        errorMessage: response.message ?? 'No message',\n        name: response.name,\n        url: response['url'],\n        status: response['status'],\n      });\n\n      this.gloalService.logToSentry(new Error('HTTP Request Failed'));\n\n      // end of login to sentry\n\n      if (response['status'] == 401 || response['status'] == 618) {\n        const refreshToken = localStorage.getItem('refresh_token');\n        if (\n          refreshToken &&\n          refreshToken !== 'undefined' &&\n          refreshToken !== 'null'\n        ) {\n          if (response['status'] == 618) {\n            this.snackbar.openSnackBar('Session expired. Refreshing...');\n          }\n          authenticationService\n            .refreshAccessToken(refreshToken)\n            .then((res: any) => {\n              if (res && response['status'] == 618) {\n                window.location.reload();\n              }\n            });\n        } else {\n          if (response['status'] == 618) {\n            this.snackbar.openSnackBar('Session expired. Refreshing...');\n          }\n          authenticationService\n            .refreshSession()\n            .then((res: any) => {\n              window.location.reload();\n            })\n            .catch((error) => {\n              this.snackbar.openSnackBar(\n                'Session expired. Please login again.'\n              );\n              authenticationService.logout();\n            });\n        }\n      }\n      if (response['status'] == 403) {\n        this.snackbar.openSnackBar(response['error']);\n      }\n      return throwError(response);\n    }\n    return next.handle(request);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  HttpRequest,\n  HttpHandler,\n  HttpEvent,\n  HttpInterceptor,\n} from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, finalize } from 'rxjs/operators';\nimport { GlobalService } from '../global.service';\n\n@Injectable()\nexport class GlobalInterceptor implements HttpInterceptor {\n  private requestCount = 0;\n\n  constructor(private loader: GlobalService) {}\n\n  intercept(\n    request: HttpRequest<any>,\n    next: HttpHandler\n  ): Observable<HttpEvent<any>> {\n    console.log('GlobalInterceptor is called...');\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    console.log('loading sarted ', this.requestCount);\n\n    // if (request.url.startsWith('/api')) {\n    //   console.log('assadsadsa');\n    // }\n\n    // increment request count\n    this.requestCount++;\n    this.loader.setLoading(true);\n    // alert(this.loader.getLoading());\n\n    return next.handle(request).pipe(\n      catchError((err) => {\n        // handle errors here if needed\n        return throwError(err);\n      }),\n      finalize(() => {\n        // decrement request count\n        this.requestCount--;\n\n        // stop loader if no more requests are pending\n        // if (this.requestCount === 0) {\n        this.loader.setLoading(false);\n        // alert(this.loader.getLoading());\n        // }\n      })\n    );\n  }\n}\n","import {\n  Inject,\n  Injectable,\n  InjectionToken,\n  Injector,\n  Optional,\n} from '@angular/core';\nimport {\n  HttpClient,\n  HttpEvent,\n  HttpInterceptor,\n  HttpHandler,\n  HttpRequest,\n} from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { ErrorHandlerInterceptor } from './error-handler.interceptor';\nimport { AuthInterceptor } from './auth.interceptor';\nimport { ApiPrefixInterceptor } from './api-prefix.interceptor';\nimport { AppInfoService } from '../app-info.service';\nimport { GlobalInterceptor } from './global.interceptor';\nimport { CustomHeadersInterceptor } from './custom-headers.interceptor';\n\nexport interface CustomHeadersObject {\n  headerKey: string;\n  headerValue: any;\n}\ndeclare module '@angular/common/http' {\n  export interface HttpClient {\n    authorize(): HttpClient;\n    setCustomHeaders(customHeaders?: CustomHeadersObject[]): HttpClient;\n\n    skipLoader(): HttpClient;\n  }\n}\n\n//allows to chain interceptors\nclass HttpInterceptorHandler implements HttpHandler {\n  constructor(\n    private next: HttpHandler,\n    private interceptor: HttpInterceptor\n  ) {}\n\n  handle(request: HttpRequest<any>): Observable<HttpEvent<any>> {\n    console.log('fn7-base-ui ApiPrefixInterceptor is called');\n    return this.interceptor.intercept(request, this.next);\n  }\n}\n\nexport const HTTP_DYNAMIC_INTERCEPTORS = new InjectionToken<HttpInterceptor>(\n  'HTTP_DYNAMIC_INTERCEPTORS'\n);\n\n/**\n * Extends HttpClient with per request configuration using dynamic interceptors.\n */\n@Injectable()\nexport class HttpService extends HttpClient {\n  private appMetaService: any;\n\n  constructor(\n    private httpHandler: HttpHandler,\n    private injector: Injector,\n    @Optional()\n    @Inject(HTTP_DYNAMIC_INTERCEPTORS)\n    private interceptors: HttpInterceptor[] = []\n  ) {\n    super(httpHandler);\n    if (!this.interceptors) {\n      // Configure default interceptors that can be disabled here\n      this.interceptors = [\n        this.injector.get(ApiPrefixInterceptor),\n        this.injector.get(GlobalInterceptor),\n        this.injector.get(CustomHeadersInterceptor),\n        this.injector.get(ErrorHandlerInterceptor),\n      ];\n    }\n  }\n\n  override authorize(): HttpClient {\n    console.log('authorize is called');\n    return this.addInterceptor(this.injector.get(AuthInterceptor));\n  }\n\n  override setCustomHeaders(customHeaders: CustomHeadersObject[]): HttpClient {\n    return this.addInterceptor(\n      this.injector\n        .get(CustomHeadersInterceptor)\n        .configure({ customHeaders: customHeaders })\n    );\n  }\n\n  override skipLoader(): HttpClient {\n    console.log('skipLoader is called');\n    return this.removeInterceptor(this.injector.get(GlobalInterceptor));\n  }\n\n  // Override the original method to wire all interceptors when triggering any request.\n  override request(method?: any, url?: any, options?: any): any {\n    if (!this.appMetaService) {\n      this.appMetaService = this.injector.get(AppInfoService);\n    }\n\n    const handler = this.interceptors.reduceRight(\n      (next, interceptor) => new HttpInterceptorHandler(next, interceptor),\n      this.httpHandler\n    );\n\n    return new HttpClient(handler).request(method, url, options);\n  }\n\n  private addInterceptor(interceptor: HttpInterceptor): HttpService {\n    return new HttpService(\n      this.httpHandler,\n      this.injector,\n      this.interceptors.concat([interceptor])\n    );\n  }\n  private removeInterceptor(interceptor: HttpInterceptor): HttpService {\n    return new HttpService(\n      this.httpHandler,\n      this.injector,\n      this.interceptors.filter((i) => i !== interceptor)\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SnackbarService  {\n  constructor(private _snackBar: MatSnackBar) {}\n\n  openSnackBar(\n    message: any = 'No Message',\n    action: string = 'Dismiss',\n    duration: number = 5000,\n    verticalPosition: any = 'top',\n    horizontalPosition: any = 'right',\n    panelClass: string = 'snackbarDefault'\n  ) {\n    const snackBarRef = this._snackBar.open(message, action, {\n      duration: duration,\n      verticalPosition: verticalPosition,\n      horizontalPosition: horizontalPosition,\n    });\n    return new Promise((resolve) => {\n      const snackBarRef = this._snackBar.open(message, action, {\n        duration: duration,\n        verticalPosition: verticalPosition,\n        horizontalPosition: horizontalPosition,\n      });\n\n      const actionSubscription = snackBarRef.onAction().subscribe(() => {\n        resolve('action');\n        actionSubscription.unsubscribe();\n        dismissalSubscription.unsubscribe();\n      });\n\n      const dismissalSubscription = snackBarRef\n        .afterDismissed()\n        .subscribe(() => {\n          resolve('dismiss');\n          actionSubscription.unsubscribe();\n          dismissalSubscription.unsubscribe();\n        });\n    });\n  }\n\n  get getSnackbarInstance() {\n    return this._snackBar;\n  }\n\n  disMissSnackBar() {\n    console.log('dismiss');\n    this._snackBar.dismiss();\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}"],"names":["PlatformConstants","userFn7HelixApplications","userHelixJourney","helixJourney","helixAppId","PLATFORM_VERSION","APP_CONTEXT","ORG_HKEY","ORG_ROLE","USER_ROLE","FIREBASE_CUSTOM_TOKEN","FIREBASE_CUSTOM_TOKEN_EXPIRY","CommonModule","GlobalService","AppInfoService","SnackbarService","HttpClient","HttpClientModule","MatSnackBarModule","RouteReuseStrategy","HttpService","ApiPrefixInterceptor","AuthInterceptor","CustomHeadersInterceptor","ErrorHandlerInterceptor","GlobalInterceptor","RouteReusableStrategy","AuthenticationService","Fn7BaseLibModule","provide","useClass","imports","exports","i0","LoaderComponent","constructor","loader","selectors","standalone","features","decls","vars","consts","template","styles","get","lget","Map","routeSnapshot","segments","pathFromRoot","map","s","url","segment","path","join","filter","queryParams","URLSearchParams","toString","console","log","shouldDetach","route","shouldStore","store","handle","routeCacheConfig","shouldReuse","isMenuLayoutComp","mode","key","getCurrentURL","routeStore","set","shouldAttach","component","doc_type","params","cachedRoute","cachedRouteKey","res","retrieve","shouldReuseRoute","future","curr","catchError","throwError","http","prefix","pipe","data","err","getAppInfo","server_uri","current_host","location","hostname","URL","host","localStorage","setItem","observe","error","toPromise","then","response","app_meta_data","body","headers","platformVersion","catch","factory","providedIn","auth0","jwtDecode","_","DataService","ActivatedRoute","Router","Location","firstValueFrom","lastValueFrom","snackbar","appMetaService","globalService","fn7sdk","router","auth0_callback_url","window","origin","getAuth0Config","app_context","getItem","JSON","parse","initializeAuth0Config","auth0_configurations","tenants","config","auth0_connection","auth0_client_id","auth0_client_secret","auth0_domain","custom_domain","custom_auth0_domain","auth0Client","WebAuth","domain","clientID","audience","responseType","universallogin","redirectUripath","authorize","redirectUri","scope","login","email","password","redirectUriPath","role","Promise","resolve","reject","urlParamsString","search","setLoading","realm","callSnackBar","error_description","result","loginWithoutRedirect","popup","loginWithCredentials","username","connection","authResult","setSessionInLocalStorage","signupWithoutRedirect","name","fn7DirectUser","encodeURIComponent","userMeta","prepareUserMetadata","signup","userMetadata","description","performPostSignupActions","socialAuthWithPopup","provider","owp","decodedToken","decodeIdToken","idToken","user_id","user_role","setUserMetaDataInAuth0","accessToken","newSession","refreshSession","action","management","Management","token","userId","sub","patchUserMetadata","user","snapshot","userData","org_role","org_hkey","utm_source","utm_medium","utm_campaign","doc_id","isActive","isSignupJourneyCompleted","org_id","split","pop","orgData","createDocument","executeServerSideAction","email_verified","navigate","queryParamsHandling","checkSession","setSessionAfterExchange","getUserInfoFromAuth0","refreshToken","client","userInfo","expiresAt","stringify","expiresIn","Date","getTime","userContext","newlogin","loginWithPopup","subscribe","afterAuthenticate","newSignup","authorizationParams","screen_hint","user$","tokenAUTH","access_token","getAccessTokenSilently","detailedResponse","Claims","idTokenClaims$","claims","id_token","__raw","expires_at","exp","appInfo","applicationMeta","defaultOrgSignUpRole","AppUser","getDocument","loginWorkflowId","routeUser","auth0meta","setUserMetaData","signupAndLogin","redirect","redirectUrlParams","getReturnUrlParams","app_data","appRoutes","roleroute","rediretToReturnUrl","role_configurations","undefined","signupJourneyDocType","displaySignupJourneyPopup","navigateByUrl","currentUrl","href","inviteUser","orgRole","assignedUserRole","currentUserData","parent_org_hkey","orgid","generateDocId","changepassword","authoId","uData","createUserInBackend","signupWithSocial","sendVerificationMail","passwordlessStart","send","changePassword","isUpdate","updatedUser","same_org","handleAuthentication","userMetaData","urlParams","code","exchangeCodeForTokens","extractedParams","forEach","value","grantType","session","bodyData","grant_type","client_secret","client_id","redirect_uri","access_key","urlEncodedData","Object","keys","fetch","method","json","logout","setSession","Error","expires_in","refresh_token","getUserData","isEmailVerified","isLoggedIn","appContext","theme","serverUrl","clear","returnUrl","returnTo","refreshAccessToken","msg","openSnackBar","decoded","userRole","defaultUserSignUpRole","application_id","Math","random","slice","setReturnUrlParams","returnUrlParams","pathname","query","param","removeItem","redirectToDefaultRoute","defaultRoute","default","getManagementToken","clientId","clientSecret","getUserByEmail","getUsersUrl","Authorization","updateBlockStatus","block","blocked","changeUserRole","newUserRole","updatedmetaData","user_metadata","updateDocument","changeUserStatus","message","changeOrgStatus","HttpParams","Observable","omitBy","lomitBy","isNil","lisNil","isPlatformBrowser","PLATFORM_ID","sdk","platformId","ssaName","payload","customHeaders","request","setCustomHeaders","query_params","cckey","checksum","getCCKeyString","encodeQueryParams","post","callback","cleanedObject","exportFields","i","length","append","upsert","put","delete","from","to","subject","email_body","urlPath","userOrgHkey","getUserOrgHkey","getUserOrgRole","getUserRole","extendedParams","getExtendedParams","string","hash","len","charCodeAt","application_url_prefix","objValues","values","Injector","NgZone","Subject","Sentry","injector","zone","getCurrentScope","getLocalStorageItem","loading","loadingMessage","getLoading","getLoadingMessage","setLoadingMessage","getHelixUserInput","helixUserInputSubject","setHelixUserInput","input","next","setTheme","setLocalStorageItem","getTheme","getAppContext","getUSerContext","setSentryTag","setTag","setSentryUser","setUser","logToSentry","additionalInfo","captureException","setSetryContext","context","setContext","HttpEvent","HttpHandler","HttpRequest","TransferState","makeStateKey","HOST_NAME","HOST","transferState","intercept","host_name","domain_check","correlationId","fn7_helix_application_id","includes","currentSubPlan","subscription_plan_id","sub_id","requestExtendedData","dev_current_host_url","indexOf","clone","setHeaders","BehaviorSubject","switchMap","take","finalize","mergeMap","authenticationService","expirationTime","currentTime","expirationTimestamp","parseInt","isRefreshing","refreshTokenSubject","attachTokenToRequest","e","configure","options","instance","each","element","headerKey","headerValue","HttpErrorResponse","gloalService","errorHandler","errorMessage","status","reload","requestCount","InjectionToken","HttpInterceptorHandler","interceptor","HTTP_DYNAMIC_INTERCEPTORS","httpHandler","interceptors","addInterceptor","skipLoader","removeInterceptor","handler","reduceRight","concat","MatSnackBar","_snackBar","duration","verticalPosition","horizontalPosition","panelClass","snackBarRef","open","actionSubscription","onAction","unsubscribe","dismissalSubscription","afterDismissed","getSnackbarInstance","disMissSnackBar","dismiss"],"sourceRoot":"webpack:///","x_google_ignoreList":[17]}