{"version":3,"file":"libs_fn7-common-lib_src_lib_services_fn7-sdk_service_ts.js","mappings":"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","sources":["./libs/fn7-common-lib/src/index.ts","./libs/fn7-common-lib/src/lib/fn7-common-lib.module.ts","./libs/fn7-common-lib/src/lib/lib.routes.ts","./libs/fn7-common-lib/src/lib/resolvers/list-view.resolver.ts","./libs/fn7-common-lib/src/lib/services/fn7-sdk.service.ts","./libs/fn7-common-lib/src/lib/services/look-up.service.ts","./libs/fn7-common-lib/src/lib/services/meta-tags-service.service.ts","./libs/fn7-common-lib/src/lib/services/workflow-engine.service.ts","./libs/ssr-fn7-ui-renderer/src/lib/shared/dialog/dialog.component.ts","./libs/ssr-fn7-ui-renderer/src/lib/shared/dialog/dialog.component.html","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["export * from './lib/fn7-common-lib.module';\n\nexport * from './lib/lib.routes';\n\nexport * from './lib/services/fn7-sdk.service';\n\nexport * from './lib/interfaces/workFlow';\n\nexport * from './lib/services/workflow-engine.service';\n\nexport * from './lib/resolvers/list-view.resolver';\n\nexport * from './lib/services/meta-tags-service.service';\n\nexport * from './lib/services/look-up.service';\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { fn7CommonLibRoutes } from './lib.routes';\n\n@NgModule({\n  imports: [CommonModule, RouterModule.forChild(fn7CommonLibRoutes)],\n})\nexport class Fn7CommonLibModule {}\n","import { Route } from '@angular/router';\n\nexport const fn7CommonLibRoutes: Route[] = [\n  /* {path: '', pathMatch: 'full', component: InsertYourComponentHere} */\n];\n","import { HttpClient } from '@angular/common/http';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport {\n  Router,\n  Resolve,\n  RouterStateSnapshot,\n  ActivatedRouteSnapshot,\n  RouteReuseStrategy,\n} from '@angular/router';\nimport { Fn7SDKService } from '../services/fn7-sdk.service';\nimport { Observable, catchError, forkJoin, map, of, tap } from 'rxjs';\nimport { get as lget, omitBy as lomitBy, isNil as lisNil } from 'lodash';\nimport { isPlatformBrowser } from '@angular/common';\nimport { MetaTagsServiceService } from '../services/meta-tags-service.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ListViewResolver implements Resolve<any> {\n  global_doc_options: any;\n  constructor(\n    private http: HttpClient,\n    private sdk: Fn7SDKService,\n    // private appStateService: AppStateService,\n    private reuser: RouteReuseStrategy,\n    private metaTagsService: MetaTagsServiceService\n  ) {}\n  resolve(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<any> {\n    const startTime = Date.now(); // Record start time\n\n    const routePath = this.getCurrentURL(route);\n    const doc_options = route.params['doc_options']?.split('-');\n    this.global_doc_options = doc_options;\n    const doc_type = doc_options[0];\n    const doc_id = doc_options[1];\n\n    console.log('doc_type', doc_type);\n    const queryParams = this.extractQueryParams(route);\n    if (this.reuser.shouldAttach(route)) {\n      return this.resolveFromCache(routePath, doc_type, queryParams);\n    }\n\n    const userRole = this.sdk.getUserRole() || 'Consumer';\n    const subScriptionPlan = this.getSubscriptionPlan();\n    const { schemaName, uiSchemaName } = this.getSchemaNames(\n      doc_type,\n      userRole,\n      subScriptionPlan,\n      doc_id ? 'detail' : 'list'\n    );\n\n    const baseUrl = this.getBaseUrl();\n    const current_host = this.getCurrentHost();\n\n    const JsonSchema = this.http.get(\n      `${baseUrl}/${current_host}/templates/${schemaName}`\n    );\n\n    const JsonUiSchema = this.http.get(\n      `${baseUrl}/${current_host}/templates/${uiSchemaName}`\n    );\n\n    const JsonData = doc_id ? this.sdk.getDocument(doc_type, doc_id) : of({});\n    console.log('doc_id', doc_id, doc_type);\n    console.log(\n      'JsonSchemaUrl',\n      `${baseUrl}/${current_host}/templates/${schemaName}`,\n      `${baseUrl}/${current_host}/templates/${uiSchemaName}`\n    );\n\n    return forkJoin({ JsonSchema, JsonUiSchema, JsonData }).pipe(\n      catchError((err) => this.handleError(err)),\n      tap(() => {\n        const executionTime = Date.now() - startTime;\n        console.log(`Resolver execution time: ${executionTime} ms`);\n      }),\n      map((data) =>\n        this.mapData(data, routePath, doc_type, doc_id, queryParams)\n      )\n    );\n  }\n\n  private getCurrentURL(routeSnapshot: ActivatedRouteSnapshot): string {\n    const segments = routeSnapshot.pathFromRoot\n      .map((s) => s.url.map((segment) => segment.path).join('/'))\n      .filter((path) => path)\n      .join('/');\n    const queryParams = new URLSearchParams(\n      routeSnapshot.queryParams as any\n    ).toString();\n    return `/${segments}?${queryParams}`;\n  }\n\n  private extractQueryParams(route: ActivatedRouteSnapshot): any {\n    const filter = JSON.parse(lget(route.queryParams, 'filter', '{}'));\n    const esFilter = lget(route.queryParams, 'esFilter', undefined);\n\n    if (filter['filter'] && esFilter) {\n      filter['filter'] = `${filter['filter']} AND ${esFilter}`;\n    } else if (esFilter) {\n      filter['filter'] = esFilter;\n    }\n\n    return lomitBy(\n      {\n        filter: filter['filter'],\n        sortBy: lget(route.queryParams, 'sortBy', undefined),\n        search: lget(route.queryParams, 'search', undefined),\n        page: lget(route.queryParams, 'page', 1),\n        perPage: lget(route.queryParams, 'perPage', 10),\n        serverSideAction: lget(\n          route.queryParams,\n          'serverSideAction',\n          undefined\n        ),\n      },\n      lisNil\n    );\n  }\n\n  private resolveFromCache(\n    routePath: string,\n    doc_type: string,\n    queryParams: any\n  ): Observable<any> {\n    const data$ = this.sdk.getDocuments(doc_type, queryParams);\n    return of({\n      isCachedRoute: true,\n      data$: data$,\n      isListView: true,\n      routePath: routePath,\n    });\n  }\n\n  private getSubscriptionPlan(): string {\n    const currentSubPlan: any = this.sdk.isPlatformBrowser()\n      ? JSON.parse(localStorage.getItem('currentPlan') || '{}')\n      : {};\n\n    return currentSubPlan.subscription_plan_id || currentSubPlan.sub_id;\n  }\n\n  private getSchemaNames(\n    doc_type: string,\n    userRole: string,\n    subScriptionPlan: string,\n    view: string = 'detail'\n  ): { schemaName: string; uiSchemaName: string } {\n    if (subScriptionPlan) {\n      return {\n        schemaName: `${doc_type}_${userRole}_${subScriptionPlan}.jsonschema.json`,\n        uiSchemaName: `${doc_type}_${userRole}_${subScriptionPlan}.${view}.uischema.json`,\n      };\n    }\n    return {\n      schemaName: `${doc_type}_${userRole}.jsonschema.json`,\n      uiSchemaName: `${doc_type}_${userRole}.${view}.uischema.json`,\n    };\n  }\n\n  private getBaseUrl(): string {\n    return this.sdk.getHostName() === 'localhost'\n      ? 'http://localhost:8080/api/k8s/helika'\n      : '/api/k8s/helika';\n  }\n\n  private getCurrentHost(): string {\n    const appName = 'helix'; //this.sdk.applicationName();\n    return appName;\n    // return window.location.hostname === 'localhost'\n    //   ? appName\n    //   : window.location.host.split('.')[0];\n  }\n\n  private handleError(err: any): Observable<any> {\n    console.error('Error in fetching data', err);\n    return of({\n      JsonSchema: {},\n      JsonUiSchema: {},\n      JsonData: {},\n    });\n  }\n\n  private mapData(\n    data: any,\n    routePath: string,\n    doc_type: string,\n    doc_id: string = '',\n    queryParams: any\n  ): any {\n    console.log('data', data);\n    const JsonData = data.JsonData?.data?.length > 0 ? data.JsonData.data : {};\n    const additionalData = {\n      totalRecords: data.JsonData.total,\n      appliedSearchParam: queryParams.search,\n      appliedSortByParams: queryParams.sortBy,\n      appliedFilters: queryParams.filter,\n      jsonFormInstanceKey: doc_type,\n      page: queryParams.page,\n      recordsPerPage: queryParams.perPage,\n    };\n\n    // this.appStateService.setView('list');\n\n    // update meta Tags for SEO\n    console.log('data.JsonSchema?.metaTages', data.JsonSchema?.metaTags);\n    this.metaTagsService.updateMetaTags(data.JsonSchema?.metaTags);\n\n    const oa: any = this.sdk.isPlatformBrowser()\n      ? JSON.parse(localStorage.getItem('oa') || '{}')\n      : '';\n    console.log('oa ->', oa);\n\n    const localStorageData = oa[this.global_doc_options];\n\n    return {\n      JsonSchema: data.JsonSchema,\n      JsonUiSchema: data.JsonUiSchema,\n      JsonData: doc_id\n        ? JsonData[0]\n        : JsonData\n        ? localStorageData\n          ? localStorageData\n          : {}\n        : {},\n      additionalData,\n      routePath,\n      doc_type,\n    };\n  }\n}\n","import {\n  Inject,\n  Injectable,\n  Injector,\n  NgZone,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { DataService, SnackbarService } from '@app/fn7-base-lib';\nimport { firstValueFrom, lastValueFrom } from 'rxjs';\nimport { Fn7QueryParams } from '../interfaces/Fn7QueryParams';\nimport { isPlatformBrowser } from '@angular/common';\nimport { TransferState, makeStateKey } from '@angular/platform-browser';\nimport { NavigationStart, Router } from '@angular/router';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { DialogComponent } from 'libs/ssr-fn7-ui-renderer/src/lib/shared/dialog/dialog.component';\n\n// Server state keys\nconst APP_INFO = makeStateKey('APP_INFO');\nconst FN7_PLATFORM_VERSION = makeStateKey('PLATFORM-VERSION');\nconst HOST_NAME = makeStateKey('HOST_NAME');\nconst HOST = makeStateKey('HOST');\n\ndeclare let gtag: Function; // Declare gtag for Google Analytics\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class Fn7SDKService {\n  // \"Navigation,\" \"Forms,\" \"User Engagement,\" \"Media,\"\n  private defaultCategory = 'Navigationv';\n  // \"Click,\" \"Submit,\" \"View,\" \"Play,\" \"Download,\"\n  private defaultAction = 'Click';\n  private globalDialogRef: MatDialogRef<any> | null = null;\n\n  constructor(\n    private dataService: DataService,\n    @Inject(PLATFORM_ID) private platformId: any,\n    private transferState: TransferState,\n    private snckBar: SnackbarService,\n    private injector: Injector,\n    private router: Router,\n    private zone: NgZone\n  ) {}\n\n  getWorkflowFileFromBackend = (urlPath: string, params: any) => {\n    return firstValueFrom(\n      this.dataService.getWorkflowFileFromBackend(urlPath, params)\n    );\n  };\n  executeServerSideAction = (\n    ssaName: string,\n    payload?: any,\n    query_params?: Fn7QueryParams,\n    customHeaders?: []\n  ) => {\n    return lastValueFrom(\n      this.dataService.executeServerSideAction(\n        ssaName,\n        payload,\n        query_params,\n        customHeaders\n      )\n    );\n  };\n\n  // CRUD operations\n  createDocument = (\n    doc_type: string,\n    data: any,\n    callback?: any,\n    customHeaders?: any\n  ) => {\n    console.log('client-sdk');\n    return lastValueFrom(\n      this.dataService.createDocument(\n        doc_type,\n        data,\n        callback,\n        customHeaders || []\n      )\n    );\n  };\n\n  getDocuments = (\n    doc_type: string,\n    params?: Fn7QueryParams,\n    callback?: any,\n    customHeaders?: any\n  ) => {\n    return lastValueFrom(\n      this.dataService.getDocuments(\n        doc_type,\n        params,\n        callback,\n        customHeaders || []\n      )\n    );\n  };\n\n  getDocument = (\n    doc_type: string,\n    doc_id: any,\n    params?: Fn7QueryParams,\n    callback?: any,\n    customHeaders?: any\n  ) => {\n    return lastValueFrom(\n      this.dataService.getDocument(\n        doc_type,\n        doc_id,\n        params,\n        callback,\n        customHeaders || []\n      )\n    );\n  };\n\n  updateDocument = (\n    doc_type: string,\n    doc_id: any,\n    data: any,\n    upsert?: boolean,\n    callback?: any,\n    customHeaders?: any\n  ) => {\n    return lastValueFrom(\n      this.dataService.updateDocument(\n        doc_type,\n        doc_id,\n        data,\n        upsert,\n        callback,\n        customHeaders || []\n      )\n    );\n  };\n\n  deleteDocument = (\n    doc_type: string,\n    doc_id: any,\n    callback?: any,\n    customHeaders?: any\n  ) => {\n    return lastValueFrom(\n      this.dataService.deleteDocument(\n        doc_type,\n        doc_id,\n        callback,\n        customHeaders || []\n      )\n    );\n  };\n\n  // context operations\n  applicationMeta = () => {\n    return this.dataService.applicationMeta();\n  };\n  applicationName = () => {\n    return this.dataService.applicationName();\n  };\n  userContext = (): any => {\n    return this.dataService.userContext();\n  };\n  getUserRole = (): any => {\n    const userMeta = this.userContext();\n    return userMeta?.user_role;\n  };\n  getOrgRole = (): any => {\n    const userMeta = this.userContext();\n    return userMeta?.org_role;\n  };\n\n  // browser or server side\n  isPlatformBrowser = () => {\n    return isPlatformBrowser(this.platformId);\n  };\n\n  getHost = () => {\n    if (this.isPlatformBrowser()) {\n      return window.location.host;\n    } else {\n      return this.transferState.get(HOST, null);\n    }\n  };\n\n  getHostName = () => {\n    if (this.isPlatformBrowser()) {\n      return window.location.hostname;\n    } else {\n      return this.transferState.get(HOST_NAME, null);\n    }\n  };\n\n  // angular based methods\n  navigateTo = (\n    doc_type: string,\n    mode: string,\n    doc_id?: string,\n    params?: any\n  ) => {\n    const router = this.injector.get(Router);\n    console.log('params', params);\n\n    const ngZone = this.injector.get(NgZone);\n\n    ngZone.run(() => {\n      if (doc_id && mode == 'edit') {\n        router.navigate([`/admin/dynamic/${doc_type}/${doc_id}/edit`]);\n      } else if (doc_id) {\n        router.navigate(\n          [`/admin/dynamic/${doc_type}/${doc_id}`],\n          params ? { queryParams: params } : {}\n        );\n      } else if (mode == 'new') {\n        router.navigate(\n          [`/admin/dynamic/${doc_type}/new`],\n          params ? { queryParams: params } : {}\n        );\n      } else {\n        router.navigate(\n          [`/admin/dynamic/${doc_type}`],\n          params ? { queryParams: params } : {}\n        );\n      }\n    });\n  };\n\n  navigateToHeadless = (\n    doc_type: string,\n    mode: string,\n    doc_id?: string,\n    params?: any,\n    oa?: boolean\n  ) => {\n    const router = this.injector.get(Router);\n    const ngZone = this.injector.get(NgZone);\n    try {\n      ngZone.run(() => {\n        if (oa) {\n          if (doc_id && mode == 'detail') {\n            router.navigate(\n              [`/admin/oa/headless/dynamic/${doc_type}/${doc_id}`],\n              params ? { queryParams: params } : {}\n            );\n          } else {\n            router.navigate(\n              [`/admin/oa/headless/dynamic/${doc_type}/new`],\n              params ? { queryParams: params } : {}\n            );\n          }\n        } else {\n          if (doc_id && mode == 'detail') {\n            router.navigate(\n              [`/admin/headless/dynamic/${doc_type}/${doc_id}`],\n              params ? { queryParams: params } : {}\n            );\n          } else if (mode == 'new') {\n            router.navigate(\n              [`/admin/headless/dynamic/${doc_type}/new`],\n              params ? { queryParams: params } : {}\n            );\n          } else {\n            router.navigate(\n              [`/admin/headless/dynamic/${doc_type}`],\n              params ? { queryParams: params } : {}\n            );\n          }\n        }\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  navigateToComponent = (url: string, data?: any) => {\n    console.log('SAIKUMAR,', url, data);\n    const ngZone = this.injector.get(NgZone);\n\n    try {\n      ngZone.run(() => {\n        // Ensure queryParamsHandling is 'merge' by default\n        const navigationExtras = {\n          ...data,\n          queryParamsHandling: 'merge',\n        };\n\n        this.router.navigate([url], navigationExtras);\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n  openSnackBar = (\n    message: string,\n    action?: string,\n    duration?: number,\n    verticalPosition?: string,\n    horizontalPosition?: string\n  ) => {\n    this.snckBar.openSnackBar(message, action, duration);\n  };\n\n  async trackEvent({\n    category,\n    action,\n    label = '',\n    value = null,\n  }: {\n    category?: string;\n    action?: string;\n    label?: string;\n    value?: number | null;\n  }) {\n    return this.GtrackEvent({\n      category: category,\n      action: action,\n      label: label,\n      value: value,\n    });\n  }\n\n  GtrackEvent({\n    category = this.defaultCategory,\n    action = this.defaultAction,\n    label = '',\n    value = null,\n  }: {\n    category?: string;\n    action?: string;\n    label?: string;\n    value?: number | null;\n  }) {\n    console.log('trackevent', action, label, value, category);\n\n    gtag('event', action, {\n      event_category: category,\n      event_label: label,\n      value: value,\n    });\n  }\n\n  public eventEmitter(\n    eventName: string,\n    eventCategory: string,\n    eventAction: string,\n    eventLabel: string | null = null,\n    eventValue: number | null = null\n  ) {\n    gtag('event', eventName, {\n      event_category: eventCategory,\n      event_action: eventAction,\n      event_label: eventLabel,\n      event_value: eventValue,\n    });\n  }\n\n  openDialogRef = (config: any, callback?: any) => {\n    const dialog = this.injector.get(MatDialog);\n    let dialogRef: MatDialogRef<DialogComponent>;\n    let subscription: any;\n    const closeOnNavigation =\n      config?.modal_config?.closeOnNavigation == undefined\n        ? true\n        : config?.modal_config?.closeOnNavigation;\n    return new Promise((resolve, reject) => {\n      this.zone.run(() => {\n        dialogRef = dialog.open(DialogComponent, {\n          data: config,\n          ...config.modal_config,\n        });\n        this.globalDialogRef = dialogRef;\n      });\n      if (closeOnNavigation) {\n        subscription = this.router.events.subscribe((event: any) => {\n          if (event instanceof NavigationStart) {\n            dialogRef.close();\n            subscription.unsubscribe();\n          }\n        });\n      }\n      dialogRef.afterClosed().subscribe((result) => {\n        console.log('The dialog was closed');\n        console.log('result', result);\n        resolve(result);\n      });\n    });\n  };\n  closeDialogRef() {\n    if (this.globalDialogRef) {\n      this.globalDialogRef.close();\n    }\n  }\n\n  copyURLToClipBoard(url: string) {\n    navigator.clipboard.writeText(url);\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { DataService } from '@app/fn7-base-lib';\nimport {\n  Observable,\n  catchError,\n  firstValueFrom,\n  forkJoin,\n  map,\n  of,\n} from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LookUpService {\n  constructor(private http: HttpClient, private injector: Injector) {\n    console.log('fn7 helika constructor LookUpService');\n  }\n\n  public getSchemasAndData(args: any, refConfig?: any) {\n    // console.log('In getSchemasAndData', args);\n\n    const fn7Sdk = this.injector.get(DataService);\n    // let fn7Sdk = args.fn7Sdk;\n    // let doc_type = args.doc_type;\n    // let doc_id = args.doc_id;\n    // let doc_type_filter = args.doc_type_filter;\n    // let JsonFileName = args.additional_data?.jsonSchemaRef;\n    // let JsonUiFileName = args.additional_data?.uiSchemaRef;\n    // let action_type = args.additional_data?.action_type;\n    // let data_filter = args.additional_data?.data_filter;\n    // let mode = args.mode;\n\n    // let fn7Sdk = args.fn7Sdk;\n    // // console.log('fn7Sdk',this.fn7Sdk);\n\n    const doc_type = args?.doc_type;\n    const doc_id = args?.doc_id;\n    let JsonFileName = args?.jsonSchemaRef;\n    let JsonUiFileName = args?.uiSchemaRef;\n    const template_name = args?.template_name;\n    const requestParams = args?.filters?.data;\n    const mode = args.mode;\n    const userRole = fn7Sdk.getUserRole();\n    const fetch_data = args.hasOwnProperty('fetch_data')\n      ? args.fetch_data\n      : true;\n    const fetch_schemas = args.hasOwnProperty('fetch_schemas')\n      ? args.fetch_schemas\n      : true;\n\n    let JsonData: any;\n    let JsonSchema: Observable<any>;\n    let JsonUiSchema: Observable<any>;\n\n    const current_host =\n      window.location.hostname == 'localhost'\n        ? 'helix'\n        : window.location.host.split('.')[0];\n\n    let baseUrl = '/api/k8s/helika';\n    if (location.hostname === 'localhost') {\n      baseUrl = `http://localhost:8080/api/k8s/helika`;\n    }\n\n    if (fetch_schemas) {\n      if (!JsonFileName || !JsonUiFileName) {\n        if (template_name) {\n          JsonFileName = `${doc_type}.${template_name}.jsonschema.json`;\n          JsonUiFileName = `${doc_type}.${template_name}.${mode}.uischema.json`;\n        } else {\n          JsonFileName = `${doc_type}_${userRole}.jsonschema.json`;\n          JsonUiFileName = `${doc_type}_${userRole}.${mode}.uischema.json`;\n        }\n      }\n\n      JsonSchema = this.http.get(\n        `${baseUrl}/${current_host}/templates/${JsonFileName}`\n      );\n      JsonUiSchema = this.http.get(\n        `${baseUrl}/${current_host}/templates/${JsonUiFileName}`\n      );\n    } else {\n      JsonSchema = of({});\n      JsonUiSchema = of({});\n    }\n\n    if (fetch_data) {\n      if (\n        requestParams &&\n        (requestParams['page'] == undefined || requestParams['page'] == null)\n      ) {\n        requestParams['page'] = 1;\n      }\n\n      if (mode == 'list') {\n        JsonData = fn7Sdk.getDocuments(\n          doc_type,\n          requestParams ? requestParams : {}\n        );\n      }\n      if (mode == 'create') {\n        JsonData = of({});\n      }\n      if (mode == 'detail') {\n        JsonData = fn7Sdk.getDocument(\n          doc_type,\n          doc_id,\n          requestParams ? requestParams : {}\n        );\n      }\n    } else {\n      JsonData = of({});\n    }\n\n    const dataTosend = forkJoin({ JsonSchema, JsonUiSchema, JsonData });\n    return dataTosend.pipe(\n      catchError((err) => {\n        console.error('err', err);\n        return of({ JsonSchema: {}, JsonUiSchema: {}, Jsondata: {} });\n      }),\n      map((data: any) => {\n        // console.log('data', data);\n        const JsonData = data.JsonData.data;\n        const JsonSchema = data.JsonSchema;\n        const JsonUiSchema = data.JsonUiSchema;\n\n        let additionalData: any = {};\n        additionalData['totalRecords'] = data.JsonData.total;\n        additionalData['doc_type'] = data.JsonData.doc_type;\n        additionalData['jsonFormInstanceKey'] = additionalData['doc_type'];\n        additionalData['recordsPerPage'] = refConfig?.recordsPerPage || 10;\n\n        const dataToSend = {\n          JsonSchema,\n          JsonUiSchema,\n          JsonData,\n          additionalData,\n        };\n        // console.log('dataToSend', dataToSend);\n        return dataToSend;\n      })\n    );\n  }\n\n  public getLookUpData(args: any) {\n    const fn7Sdk = this.injector.get(DataService);\n\n    const data_filter = args?.additional_data?.data_filter;\n    // console.log('getLookUpData', data_filter);\n\n    if (args.doc_type && args.doc_id) {\n      return firstValueFrom(\n        fn7Sdk.getDocument(\n          args.doc_type,\n          args.doc_id,\n          data_filter ? data_filter : {}\n        )\n      );\n    } else {\n      return firstValueFrom(\n        fn7Sdk.getDocuments(args.doc_type, data_filter ? data_filter : {})\n      );\n    }\n  }\n\n  public getUploadSignedUrl1() {\n    // let gcpSdk = this.injector.get(GcpSdkService);\n    // let appName = args.appName;\n    // let fileName = args.fileName;\n    // return firstValueFrom(gcpSdk.getUploadSignedUrl(appName,fileName));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Title, Meta } from '@angular/platform-browser';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MetaTagsServiceService {\n  constructor(private titleService: Title, private metaService: Meta) {}\n\n  updateMetaTags(Tags: Array<any> = []) {\n    Tags.forEach((tag) => {\n      if (tag.name === 'title') {\n        this.titleService.setTitle(tag.content);\n      } else {\n        this.metaService.updateTag({ name: tag.name, content: tag.content });\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { WorkFlowImplementation, WorkFlowInput } from '../interfaces/workFlow';\nimport { Fn7SDKService } from './fn7-sdk.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class WorkflowEngineService {\n  strings = 'WorkFlowEngine';\n  workflow: any;\n  factory: any;\n  jsonContext: any;\n\n  constructor(\n    private fn7SDK: Fn7SDKService // private jsonContext?: JsonFormContextService\n  ) {}\n  executor = (workFlowHandle: WorkFlowInput, callback: any) => {\n    console.log(this.strings, workFlowHandle);\n    // const k = this.fn7SDK.isOnline();\n    // console.log(k);\n    if (workFlowHandle.fn7_workflow_id) {\n      return this.triggerStatefullWorkflow(\n        `${workFlowHandle.fn7_workflow_id}Workflow.js`,\n        workFlowHandle,\n        callback\n      );\n    } else {\n      const isGlobal = /^(global)/i.test(workFlowHandle.action);\n      const fileName = isGlobal\n        ? 'globalFunctions.js'\n        : 'stateless-workflow.js';\n      return this.triggerStatelessWorkflow(fileName, workFlowHandle, callback);\n    }\n  };\n  triggerStatefullWorkflow = (\n    path = './myjsfile',\n    workFlowHandle: WorkFlowInput,\n    callback: any\n  ) => {\n    try {\n      console.log('triggerStatefullWorkflow => ', path);\n      // return new Promise((resolve, reject) => {\n      this.loadWorkFlowClass(path).then((factory: any) => {\n        // const instance = new MyClass();\n        console.log(\n          'triggerStatefullWorkflow FACTORY=> ',\n          factory,\n          workFlowHandle\n        );\n        factory.strings = 'wewe';\n        const implementation_instance: WorkFlowImplementation = {\n          workflow_context: workFlowHandle,\n          fn7_sdk: this.fn7SDK,\n          jsonFormsContextSDK: this.jsonContext && this.jsonContext,\n          json_form_instance:\n            this.jsonContext && this.jsonContext.getJsonContext(),\n          getNextActions: workFlowHandle.getNextActions || false,\n          role_context: '', // this.fn7SDK.userContext(),\n          user_context: '', //this.fn7SDK.userContext(),\n          org_context: '', //this.fn7SDK.userContext(),\n          callback: callback,\n        };\n\n        factory = new factory(implementation_instance, callback);\n        factory.run();\n        // Use the instance of MyClass here\n        console.log('---end-----');\n        // factory.print();\n        // factory.executor();\n        // instance.print();\n      });\n      // return resolve(true);\n      // });\n      return true;\n    } catch (e) {\n      console.log('errrrr');\n      console.log(e);\n      return true;\n    }\n  };\n  triggerStatelessWorkflow = (\n    path = './myjsfile',\n    workFlowHandle: WorkFlowInput,\n    callback: any\n  ) => {\n    return new Promise(async (resolve, reject) => {\n      try {\n        console.log('triggerStatelessWorkflow => ', callback);\n        const implementation_instance: WorkFlowImplementation = {\n          workflow_context: workFlowHandle,\n          fn7_sdk: this.fn7SDK,\n          getNextActions: workFlowHandle.getNextActions || false,\n          role_context: '', //this.fn7SDK.userContext(),\n          user_context: '', // this.fn7SDK.userContext(),\n          org_context: '', // this.fn7SDK.userContext(),\n          jsonFormsContextSDK: this.jsonContext && this.jsonContext,\n          json_form_instance:\n            this.jsonContext && this.jsonContext.getJsonContext(),\n          callback: callback,\n        };\n        if (!this.factory) {\n          this.loadWorkFlowClass(path)\n            .then(async (factory: any) => {\n              console.log(\n                'triggerStatelessWorkflow FACTORY=> ',\n                factory,\n                workFlowHandle\n              );\n              factory.strings = 'wewe';\n              this.factory = new factory(implementation_instance, callback);\n\n              if (workFlowHandle.async_action) {\n                console.log('async');\n                try {\n                  const res = await this.factory[workFlowHandle.action](\n                    callback\n                  );\n                  console.log(res);\n                  resolve(res);\n                } catch (error) {\n                  console.error('Error in async operation:', error);\n                  reject(error);\n                }\n              } else {\n                this.factory[workFlowHandle.action](callback);\n                resolve(true);\n              }\n\n              console.log('---end-----');\n            })\n            .catch((error) => {\n              console.error('Error loading workflow class:', error);\n              reject(error);\n            });\n        } else {\n          this.factory['setWorkflowEngineObject'](implementation_instance);\n          if (workFlowHandle.async_action) {\n            console.log('async');\n            try {\n              const res = await this.factory[workFlowHandle.action](callback);\n              console.log(res);\n              resolve(res);\n            } catch (error) {\n              console.error('Error in async operation:', error);\n              reject(error);\n            }\n          } else {\n            this.factory[workFlowHandle.action](callback);\n            resolve(true);\n          }\n        }\n      } catch (e) {\n        console.log('errrrr');\n        console.log(e);\n        reject(e);\n      }\n    });\n  };\n\n  loadWorkFlowClass = async (path: any): Promise<any> => {\n    try {\n      if (!this.workflow) {\n        console.log(`Nivyyyy workflow isnt there! - ${path}`);\n        // const myModule = await import(`${path}.js`);\n        // this.workflow = myModule.defaultx\n\n        const appContext = this.fn7SDK.applicationMeta();\n        const appName = appContext.application_url_prefix;\n        const filePath = `helika/${appName}/workflows/${path}`;\n        const textFile = await this.fn7SDK\n          .getWorkflowFileFromBackend(filePath, {\n            platform_version: localStorage.getItem('PLATFORM-VERSION') || '1',\n          })\n          .then((res) => res)\n          .catch((err) => {\n            console.log('errrrr');\n            console.log(err);\n          });\n\n        const jsClass = eval(`(${textFile})`);\n\n        this.workflow = jsClass;\n        return jsClass;\n      }\n      console.log(`Nivyyyy workflow IS there! - ${path}`);\n      return this.workflow;\n    } catch (e) {\n      console.log('errrrr');\n      console.log(e);\n      return Promise.resolve('return something nice ');\n    }\n  };\n}\n","import { Component, Inject, Injector, Input, ViewChild } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport {\n  MatSnackBar,\n  MatSnackBarHorizontalPosition,\n  MatSnackBarVerticalPosition,\n} from '@angular/material/snack-bar';\n// import { JsonFormContextService } from '@app/fn7-ui-renderer';\n// import { DialogReferenceComponent } from '@app/standalone-modules';\nimport { createAjv } from '@jsonforms/core';\n// import { LookUpService } from 'libs/fn7-ui-renderer/src/lib/services/look-up.service';\nimport _ from 'lodash';\nimport { BehaviorSubject } from 'rxjs';\nimport { isEmpty } from 'lodash';\nimport { LookUpService } from '@app/fn7-common-lib';\nimport { JsonFormsAngularService } from '@jsonforms/angular';\n\n@Component({\n  selector: 'ssr-dialog',\n  templateUrl: './dialog.component.html',\n  styleUrls: ['./dialog.component.css'],\n})\nexport class DialogComponent {\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public data: any,\n    private injector: Injector,\n    // private jsonFormContextService: JsonFormContextService,\n    private _snackBar: MatSnackBar,\n    public dialogRef: MatDialogRef<DialogComponent>\n  ) {\n    this.ajv = createAjv({ allErrors: true });\n  }\n  horizontalPosition: MatSnackBarHorizontalPosition = 'end';\n  verticalPosition: MatSnackBarVerticalPosition = 'top';\n  ajv: any;\n  JsonSchema: any;\n  JsonUiSchema: any;\n  Jsondata: any = {};\n\n  ChangedData: any = {};\n  loading$ = new BehaviorSubject(false);\n  args: any;\n  additionalData: any = {};\n  jsonContext: any;\n  @Input() schemaConfig: any;\n\n  ngOnInit() {\n    console.log('Dialog', this.data);\n    this.getSchemas();\n  }\n\n  getSchemas() {\n    let config = isEmpty(this.schemaConfig) ? this.data : this.schemaConfig;\n    console.log('configaaaaaa', config);\n    this.args = {\n      doc_type: config.doc_type,\n      doc_id: config?.doc_id,\n      mode: config.mode,\n      additional_data: config.additional_data,\n      template_name: config?.template_name,\n      filters: config?.filters,\n      isMultiSelect: config?.isMultiSelect,\n      hasBackdrop: config?.hasBackdrop,\n      data: config?.data,\n      fetch_schemas: config.schema && config.uiSchema ? false : true,\n      fetch_data:\n        config.data?.length > 0 || Object.keys(config.data).length > 0\n          ? false\n          : true,\n    };\n    this.loading$.next(true);\n    // inject look service in closed\n    let lookUpService = this.injector.get(LookUpService);\n    // const injector = Injector.create({ providers: [], parent: this.injector });\n    // const lookUpService = injector.get(LookUpService);\n\n    lookUpService.getSchemasAndData(this.args).subscribe((data: any) => {\n      console.log('%c data', 'font-size:20px; color:blue', data);\n\n      let totalRecords;\n      if (this.args.fetch_schemas) {\n        this.JsonSchema = data?.JsonSchema;\n        this.JsonUiSchema = data?.JsonUiSchema;\n      } else {\n        this.JsonSchema = config.schema;\n        this.JsonUiSchema = config.uiSchema;\n      }\n\n      if (\n        this.args.data?.length > 0 ||\n        Object.keys(this.args.data).length > 0\n      ) {\n        this.Jsondata = this.args.data;\n        totalRecords = this.args.data.length;\n      } else {\n        this.Jsondata = data?.JsonData || {};\n      }\n\n      if (this.args.hasBackdrop) {\n        this.dialogRef.disableClose = true;\n      }\n\n      if (this.args['mode'] == 'list') {\n        _.set(this.JsonUiSchema, 'options.show_actions', true);\n        _.set(this.JsonUiSchema, 'options.isSelectable', true);\n        _.set(this.JsonUiSchema, 'options.hide_addnew', true);\n        if (this.args.isMultiSelect) {\n          _.set(this.JsonUiSchema, 'options.isMultiSelect', true);\n        }\n\n        // updating selectd values with maping field\n        // console.log(this.data?.data[this.data.maping_field])\n        // this.Jsondata?.map((item: any) => {\n        //     this.data.data[this.data.maping_field]?.map((selectedItem: any) => {\n        //       if(item.doc_id == selectedItem.doc_id) {\n        //         item.checked = true\n        //       }\n        //     })\n        // })\n      }\n      this.loading$.next(false);\n      let additionalData: any = data.additionalData;\n      this.additionalData['totalRecords'] = additionalData['totalRecords']\n        ? additionalData['totalRecords']\n        : totalRecords;\n      this.additionalData['doc_type'] = this.JsonSchema.doc_type;\n      this.additionalData[\n        'jsonFormInstanceKey'\n      ] = `Dialog-${this.JsonSchema?.doc_type}`;\n      this.additionalData['recordsPerPage'] =\n        this.JsonUiSchema.options.recordsPerPage || 10;\n      this.additionalData['page'] = 1;\n      console.log('this.Jsondata', this.Jsondata, this.additionalData);\n      console.log('this.JsonUiSchema', this.JsonUiSchema);\n      console.log('this.JsonSchema', this.JsonSchema);\n    });\n  }\n  openSnackBar() {\n    this._snackBar.open('Fill Required Fields', 'Dismiss', {\n      horizontalPosition: this.horizontalPosition,\n      verticalPosition: this.verticalPosition,\n      duration: 3000,\n    });\n  }\n\n  validateData(data: any, schema: any): boolean {\n    const validate = this.ajv.compile(schema);\n\n    // console.log(updatedData);\n\n    const valid = validate(data);\n\n    if (!valid) {\n      console.error('Validation errors:', validate.errors);\n    }\n\n    return valid;\n  }\n\n  onDataChange(event: any) {\n    console.log('onDataChange', event);\n    this.ChangedData = event;\n    console.log('onDataChange', this.Jsondata);\n    // this.Jsondata = event\n  }\n  @ViewChild('jsonforms', { static: false }) jsonforms1: any;\n\n  removeInstance() {\n    // this.jsonFormContextService.deleteDialog(\n    //   this.additionalData['jsonFormInstanceKey']\n    // );\n  }\n\n  closeDialog(): void {\n    const dialogData: any = {\n      /* Data you want to pass back to the parent component */\n    };\n    console.log('dialogData', this.jsonforms1);\n    let ChangedData =\n      this.jsonforms1.jsonforms1.jsonformsService._state.core.data;\n    if (!Array.isArray(ChangedData)) {\n      const isValid = this.validateData(ChangedData, this.JsonSchema);\n      if (!isValid) {\n        this.jsonforms1.jsonforms1.jsonformsService.updateValidationMode(\n          'ValidateAndShow'\n        );\n        this.openSnackBar();\n        return;\n      }\n    }\n    console.log('ChangedData', ChangedData);\n\n    // if(this.args.mode == 'list') {\n    //   ChangedData = ChangedData.filter((item: any) => item.checked == true)\n    // }\n    this.dialogRef.close(ChangedData);\n    // this.removeInstance();\n  }\n}\n","<!-- <jsonforms [(data)]=\"data\" [schema]=JjsonSchema\" [uischema]=\"jsonUISchema\" [renderers]=\"renderers\"></jsonforms> -->\n<!-- <ng-container *ngIf=\"data?.data?.length!=0 && JsonSchema && JsonUiSchema \"> -->\n\n<h1 mat-dialog-title *ngIf=\"data.title\">{{ data.title }}</h1>\n\n<mat-dialog-content [ngClass]=\"schemaConfig ? '!max-h-[90vh]' : ''\" id=\"Dialog\">\n  <ng-container *ngIf=\"(loading$ | async) === false\">\n    <ssr-fn7-ui-renderer\n      [data]=\"Jsondata\"\n      [schema]=\"JsonSchema\"\n      [uischema]=\"JsonUiSchema\"\n      [additionalData]=\"additionalData\"\n      (onChange)=\"onDataChange($event)\"\n      [isDialogInstance]=\"true\"\n      #jsonforms\n    ></ssr-fn7-ui-renderer>\n  </ng-container>\n</mat-dialog-content>\n<mat-dialog-actions\n  align=\"end\"\n  class=\"flex items-center gap-4 !p-5\"\n  *ngIf=\"data.actions\"\n>\n  <ng-container *ngIf=\"JsonUiSchema\">\n    <button\n      mat-stroked-button\n      color=\"primary\"\n      *ngIf=\"data.actions?.secondary\"\n      (click)=\"removeInstance()\"\n      cdkFocusInitial\n      matDialogClose\n    >\n      {{ data.actions?.secondary || '' }}\n    </button>\n    <button\n      mat-raised-button\n      color=\"primary\"\n      class=\"btn-m\"\n      *ngIf=\"data.actions?.primary\"\n      (click)=\"closeDialog()\"\n    >\n      {{ data.actions?.primary || 'Close' }}\n    </button>\n  </ng-container>\n\n  <!-- <ng-template #close> -->\n  <!-- <button  mat-stroked-button color=\"primary\"   cdkFocusInitial matDialogClose>Close</button> -->\n  <!-- </ng-template> -->\n</mat-dialog-actions>\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}"],"names":["CommonModule","RouterModule","fn7CommonLibRoutes","Fn7CommonLibModule","forChild","imports","HttpClient","RouterStateSnapshot","ActivatedRouteSnapshot","RouteReuseStrategy","Fn7SDKService","catchError","forkJoin","map","of","tap","get","lget","omitBy","lomitBy","isNil","lisNil","MetaTagsServiceService","ListViewResolver","constructor","http","sdk","reuser","metaTagsService","resolve","route","state","startTime","Date","now","routePath","getCurrentURL","doc_options","params","split","global_doc_options","doc_type","doc_id","console","log","queryParams","extractQueryParams","shouldAttach","resolveFromCache","userRole","getUserRole","subScriptionPlan","getSubscriptionPlan","schemaName","uiSchemaName","getSchemaNames","baseUrl","getBaseUrl","current_host","getCurrentHost","JsonSchema","JsonUiSchema","JsonData","getDocument","pipe","err","handleError","executionTime","data","mapData","routeSnapshot","segments","pathFromRoot","s","url","segment","path","join","filter","URLSearchParams","toString","JSON","parse","esFilter","undefined","sortBy","search","page","perPage","serverSideAction","data$","getDocuments","isCachedRoute","isListView","currentSubPlan","isPlatformBrowser","localStorage","getItem","subscription_plan_id","sub_id","view","getHostName","appName","error","length","additionalData","totalRecords","total","appliedSearchParam","appliedSortByParams","appliedFilters","jsonFormInstanceKey","recordsPerPage","metaTags","updateMetaTags","oa","localStorageData","factory","providedIn","Injector","NgZone","PLATFORM_ID","DataService","SnackbarService","firstValueFrom","lastValueFrom","TransferState","makeStateKey","NavigationStart","Router","MatDialog","DialogComponent","APP_INFO","FN7_PLATFORM_VERSION","HOST_NAME","HOST","dataService","platformId","transferState","snckBar","injector","router","zone","urlPath","getWorkflowFileFromBackend","ssaName","payload","query_params","customHeaders","executeServerSideAction","callback","createDocument","upsert","updateDocument","deleteDocument","applicationMeta","applicationName","userContext","userMeta","user_role","org_role","window","location","host","hostname","mode","ngZone","run","navigate","e","navigationExtras","queryParamsHandling","message","action","duration","verticalPosition","horizontalPosition","openSnackBar","config","dialog","dialogRef","subscription","closeOnNavigation","modal_config","Promise","reject","open","globalDialogRef","events","subscribe","event","close","unsubscribe","afterClosed","result","trackEvent","category","label","value","GtrackEvent","defaultCategory","defaultAction","gtag","event_category","event_label","eventEmitter","eventName","eventCategory","eventAction","eventLabel","eventValue","event_action","event_value","closeDialogRef","copyURLToClipBoard","navigator","clipboard","writeText","LookUpService","getSchemasAndData","args","refConfig","fn7Sdk","JsonFileName","jsonSchemaRef","JsonUiFileName","uiSchemaRef","template_name","requestParams","filters","fetch_data","hasOwnProperty","fetch_schemas","dataTosend","Jsondata","dataToSend","getLookUpData","data_filter","additional_data","getUploadSignedUrl1","Title","Meta","titleService","metaService","Tags","forEach","tag","name","setTitle","content","updateTag","WorkflowEngineService","fn7SDK","workFlowHandle","strings","fn7_workflow_id","triggerStatefullWorkflow","isGlobal","test","fileName","triggerStatelessWorkflow","loadWorkFlowClass","then","implementation_instance","workflow_context","fn7_sdk","jsonFormsContextSDK","jsonContext","json_form_instance","getJsonContext","getNextActions","role_context","user_context","org_context","async_action","res","catch","workflow","appContext","application_url_prefix","filePath","textFile","platform_version","jsClass","eval","MAT_DIALOG_DATA","MatDialogRef","MatSnackBar","createAjv","_","BehaviorSubject","isEmpty","i0","_snackBar","ajv","allErrors","ngOnInit","getSchemas","schemaConfig","isMultiSelect","hasBackdrop","schema","uiSchema","Object","keys","loading$","next","lookUpService","disableClose","set","options","validateData","validate","compile","valid","errors","onDataChange","ChangedData","removeInstance","closeDialog","dialogData","jsonforms1","jsonformsService","_state","core","Array","isArray","isValid","updateValidationMode","selectors","viewQuery"],"sourceRoot":"webpack:///","x_google_ignoreList":[10]}